<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: /home/zoe/Mbed Programs/esp_code/mbed-os/platform/FEATURE_EXPERIMENTAL_API/FEATURE_PSA/TARGET_MBED_PSA_SRV/inc/psa/protected_storage.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('TARGET__MBED__PSA__SRV_2inc_2psa_2protected__storage_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">protected_storage.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file describes the PSA Protected Storage API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;psa/error.h&quot;</code><br />
<code>#include &quot;psa/storage_common.h&quot;</code><br />
</div>
<p><a href="TARGET__MBED__PSA__SRV_2inc_2psa_2protected__storage_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a97b66d0647ab7536fba2d6267e8fccef" id="r_a97b66d0647ab7536fba2d6267e8fccef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97b66d0647ab7536fba2d6267e8fccef">PSA_PS_API_VERSION_MAJOR</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a97b66d0647ab7536fba2d6267e8fccef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9faa1eb9f9ed6fa8595c6718f89a5d" id="r_adf9faa1eb9f9ed6fa8595c6718f89a5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf9faa1eb9f9ed6fa8595c6718f89a5d">PSA_PS_API_VERSION_MINOR</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:adf9faa1eb9f9ed6fa8595c6718f89a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac27f8fc33b69e0a9ed09b73195b42eab" id="r_ac27f8fc33b69e0a9ed09b73195b42eab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac27f8fc33b69e0a9ed09b73195b42eab">psa_ps_set</a> (<a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a> uid, size_t data_length, const void *p_data, <a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#a1f53bd4fd1ba72bd88e9d7d9eb7da211">psa_storage_create_flags_t</a> create_flags)</td></tr>
<tr class="memdesc:ac27f8fc33b69e0a9ed09b73195b42eab"><td class="mdescLeft">&#160;</td><td class="mdescRight">create a new or modify an existing key/value pair  <br /></td></tr>
<tr class="separator:ac27f8fc33b69e0a9ed09b73195b42eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a4cd1e413d9cba84f2e64c092c6c80" id="r_a12a4cd1e413d9cba84f2e64c092c6c80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12a4cd1e413d9cba84f2e64c092c6c80">psa_ps_get</a> (<a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a> uid, size_t data_offset, size_t data_length, void *p_data, size_t *p_data_length)</td></tr>
<tr class="memdesc:a12a4cd1e413d9cba84f2e64c092c6c80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the value for a provided uid.  <br /></td></tr>
<tr class="separator:a12a4cd1e413d9cba84f2e64c092c6c80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af716b24d0761837d1c7b70042bd4966f" id="r_af716b24d0761837d1c7b70042bd4966f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af716b24d0761837d1c7b70042bd4966f">psa_ps_get_info</a> (<a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a> uid, struct <a class="el" href="structpsa__storage__info__t.html">psa_storage_info_t</a> *p_info)</td></tr>
<tr class="memdesc:af716b24d0761837d1c7b70042bd4966f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the metadata about the provided uid.  <br /></td></tr>
<tr class="separator:af716b24d0761837d1c7b70042bd4966f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147a92d8387de36c32a8ede10d6d9a02" id="r_a147a92d8387de36c32a8ede10d6d9a02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a147a92d8387de36c32a8ede10d6d9a02">psa_ps_remove</a> (<a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a> uid)</td></tr>
<tr class="memdesc:a147a92d8387de36c32a8ede10d6d9a02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the provided uid and its associated data from the storage.  <br /></td></tr>
<tr class="separator:a147a92d8387de36c32a8ede10d6d9a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e80382dbc1fb7d3370c6c82a93f90b" id="r_ae4e80382dbc1fb7d3370c6c82a93f90b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4e80382dbc1fb7d3370c6c82a93f90b">psa_ps_create</a> (<a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a> uid, size_t size, <a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#a1f53bd4fd1ba72bd88e9d7d9eb7da211">psa_storage_create_flags_t</a> create_flags)</td></tr>
<tr class="separator:ae4e80382dbc1fb7d3370c6c82a93f90b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1630b75fce6941c4d619256822d5de9a" id="r_a1630b75fce6941c4d619256822d5de9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1630b75fce6941c4d619256822d5de9a">psa_ps_set_extended</a> (<a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a> uid, size_t data_offset, size_t data_length, const void *p_data)</td></tr>
<tr class="separator:a1630b75fce6941c4d619256822d5de9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1725cb412be305bd21e3e1af8c2312" id="r_a7e1725cb412be305bd21e3e1af8c2312"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7e1725cb412be305bd21e3e1af8c2312">psa_ps_get_support</a> (void)</td></tr>
<tr class="separator:a7e1725cb412be305bd21e3e1af8c2312"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file describes the PSA Protected Storage API. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a97b66d0647ab7536fba2d6267e8fccef" name="a97b66d0647ab7536fba2d6267e8fccef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97b66d0647ab7536fba2d6267e8fccef">&#9670;&#160;</a></span>PSA_PS_API_VERSION_MAJOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSA_PS_API_VERSION_MAJOR&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The major version number of the PSA PS API. It will be incremented on significant updates that may include breaking changes </p>

</div>
</div>
<a id="adf9faa1eb9f9ed6fa8595c6718f89a5d" name="adf9faa1eb9f9ed6fa8595c6718f89a5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9faa1eb9f9ed6fa8595c6718f89a5d">&#9670;&#160;</a></span>PSA_PS_API_VERSION_MINOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSA_PS_API_VERSION_MINOR&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The minor version number of the PSA PS API. It will be incremented in small updates that are unlikely to include breaking changes </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae4e80382dbc1fb7d3370c6c82a93f90b" name="ae4e80382dbc1fb7d3370c6c82a93f90b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4e80382dbc1fb7d3370c6c82a93f90b">&#9670;&#160;</a></span>psa_ps_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_ps_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a></td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#a1f53bd4fd1ba72bd88e9d7d9eb7da211">psa_storage_create_flags_t</a></td>          <td class="paramname"><span class="paramname"><em>create_flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an asset based on the given identifier, the maximum size and creation flags. This create allocates the space in the secure storage area without setting any data in the asset.</p>
<p>It is only necessary to call this function for items that will be written with the <a class="el" href="#a1630b75fce6941c4d619256822d5de9a">psa_ps_set_extended</a> function. If only the <a class="el" href="#ac27f8fc33b69e0a9ed09b73195b42eab">psa_ps_set</a> function is needed, calls to this function are redundant.</p>
<p>If the <a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#a15dbec8d862073de6024924bf015dcdd">PSA_STORAGE_FLAG_WRITE_ONCE</a> flag is passed, implementations should return <a class="el" href="group__error.html#ga1dcc6d130633ed5db8942257581b55dd">PSA_ERROR_NOT_SUPPORTED</a>.</p>
<p>This function is optional. Not all PSA Protected Storage Implementations will implement this function. Consult the documentation of your chosen platform to determine if it is present.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uid</td><td>A unique identifier for the asset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The maximum size in bytes of the asset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">create_flags</td><td>Create flags <a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#a1f53bd4fd1ba72bd88e9d7d9eb7da211">psa_storage_create_flags_t</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The assest does not exist and the input parameters are correct or the asset already exists, the input parameters are the same that have been used to create the asset and the owner is the same and the current asset content is kept TDB: "Owner is the same" doesn't really make sense from a PSA perspective, as each partition has its own UID space, making other partitions' data unadressable </td></tr>
    <tr><td class="paramname">PSA_ERROR_STORAGE_FAILURE</td><td>The create action has a physical storage error </td></tr>
    <tr><td class="paramname">PSA_ERROR_INSUFFICIENT_STORAGE</td><td>The maximum size is bigger of the current available space </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>One or more create_flags are not valid or supported </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_ARGUMENT</td><td>The asset exists and the input paramters are not the same as the existing asset </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The implementation of the API does not support this function </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation has failed due to an unspecified error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a12a4cd1e413d9cba84f2e64c092c6c80" name="a12a4cd1e413d9cba84f2e64c092c6c80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12a4cd1e413d9cba84f2e64c092c6c80">&#9670;&#160;</a></span>psa_ps_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_ps_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a></td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>data_offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>data_length</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>p_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>p_data_length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the value for a provided uid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uid</td><td>The identifier for the data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_offset</td><td>The offset within the data associated with the <code>uid</code> to start retrieving data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_length</td><td>The amount of data to read (and the minimum allocated size of the <code>p_data</code> buffer) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_data</td><td>The buffer where the data will be placed upon successful completion </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_data_length</td><td>The actual amount of data returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status indicating the success/failure of the operation</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation completed successfully </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_ARGUMENT</td><td>The operation failed because one or more of the given arguments were invalid (null pointer, wrong flags etc.) </td></tr>
    <tr><td class="paramname">PSA_ERROR_DOES_NOT_EXIST</td><td>The operation failed because the provided uid value was not found in the storage </td></tr>
    <tr><td class="paramname">PSA_ERROR_BUFFER_TOO_SMALL</td><td>The operation failed because the data associated with provided uid does not fit <code>data_size</code> </td></tr>
    <tr><td class="paramname">PSA_ERROR_STORAGE_FAILURE</td><td>The operation failed because the physical storage has failed (Fatal error) </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed because of an unspecified internal failure </td></tr>
    <tr><td class="paramname">PSA_ERROR_DATA_CORRUPT</td><td>The operation failed because of an authentication failure when attempting to get the key </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_SIGNATURE</td><td>The operation failed because the data associated with the UID failed authentication </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af716b24d0761837d1c7b70042bd4966f" name="af716b24d0761837d1c7b70042bd4966f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af716b24d0761837d1c7b70042bd4966f">&#9670;&#160;</a></span>psa_ps_get_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_ps_get_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a></td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpsa__storage__info__t.html">psa_storage_info_t</a> *</td>          <td class="paramname"><span class="paramname"><em>p_info</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the metadata about the provided uid. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uid</td><td>The identifier for the data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_info</td><td>A pointer to the <code><a class="el" href="structpsa__storage__info__t.html" title="A container for metadata associated with a specific uid.">psa_storage_info_t</a></code> struct that will be populated with the metadata</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status indicating the success/failure of the operation</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation completed successfully </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_ARGUMENT</td><td>The operation failed because one or more of the given arguments were invalid (null pointer, wrong flags etc.) </td></tr>
    <tr><td class="paramname">PSA_ERROR_DOES_NOT_EXIST</td><td>The operation failed because the provided uid value was not found in the storage </td></tr>
    <tr><td class="paramname">PSA_ERROR_STORAGE_FAILURE</td><td>The operation failed because the physical storage has failed (Fatal error) </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed because of an unspecified internal failure </td></tr>
    <tr><td class="paramname">PSA_ERROR_DATA_CORRUPT</td><td>The operation failed because of an authentication failure when attempting to get the key </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_SIGNATURE</td><td>The operation failed because the data associated with the UID failed authentication </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7e1725cb412be305bd21e3e1af8c2312" name="a7e1725cb412be305bd21e3e1af8c2312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e1725cb412be305bd21e3e1af8c2312">&#9670;&#160;</a></span>psa_ps_get_support()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t psa_ps_get_support </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a bitmask with flags set for all of the optional features supported by the implementation.</p>
<p>Currently defined flags are limited to:</p><ul>
<li><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ad9f16fc478036752ffb2ce9e50b2a710">PSA_STORAGE_SUPPORT_SET_EXTENDED</a> </li>
</ul>

</div>
</div>
<a id="a147a92d8387de36c32a8ede10d6d9a02" name="a147a92d8387de36c32a8ede10d6d9a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a147a92d8387de36c32a8ede10d6d9a02">&#9670;&#160;</a></span>psa_ps_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_ps_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a></td>          <td class="paramname"><span class="paramname"><em>uid</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the provided uid and its associated data from the storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uid</td><td>The identifier for the data to be removed</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status indicating the success/failure of the operation</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation completed successfully </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_ARGUMENT</td><td>The operation failed because one or more of the given arguments were invalid (null pointer, wrong flags etc.) </td></tr>
    <tr><td class="paramname">PSA_ERROR_DOES_NOT_EXIST</td><td>The operation failed because the provided uid value was not found in the storage </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_PERMITTED</td><td>The operation failed because the provided uid value was created with psa_eps_WRITE_ONCE_FLAG </td></tr>
    <tr><td class="paramname">PSA_ERROR_STORAGE_FAILURE</td><td>The operation failed because the physical storage has failed (Fatal error) </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed because of an unspecified internal failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac27f8fc33b69e0a9ed09b73195b42eab" name="ac27f8fc33b69e0a9ed09b73195b42eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac27f8fc33b69e0a9ed09b73195b42eab">&#9670;&#160;</a></span>psa_ps_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_ps_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a></td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>data_length</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>p_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#a1f53bd4fd1ba72bd88e9d7d9eb7da211">psa_storage_create_flags_t</a></td>          <td class="paramname"><span class="paramname"><em>create_flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>create a new or modify an existing key/value pair </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uid</td><td>the identifier for the data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_length</td><td>The size in bytes of the data in <code>p_data</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_data</td><td>A buffer containing the data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">create_flags</td><td>The flags indicating the properties of the data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A status indicating the success/failure of the operation</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>The operation completed successfully </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_PERMITTED</td><td>The operation failed because the provided uid value was already created with PSA_STORAGE_WRITE_ONCE_FLAG </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_ARGUMENT</td><td>The operation failed because one or more of the given arguments were invalid. </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The operation failed because one or more of the flags provided in <code>create_flags</code> is not supported or is not valid </td></tr>
    <tr><td class="paramname">PSA_ERROR_INSUFFICIENT_STORAGE</td><td>The operation failed because there was insufficient space on the storage medium </td></tr>
    <tr><td class="paramname">PSA_ERROR_STORAGE_FAILURE</td><td>The operation failed because the physical storage has failed (Fatal error) </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed because of an unspecified internal failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1630b75fce6941c4d619256822d5de9a" name="a1630b75fce6941c4d619256822d5de9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1630b75fce6941c4d619256822d5de9a">&#9670;&#160;</a></span>psa_ps_set_extended()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_ps_set_extended </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2storage__common_8h.html#ae9154910f4f350c3b467b55d541a21a6">psa_storage_uid_t</a></td>          <td class="paramname"><span class="paramname"><em>uid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>data_offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>data_length</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>p_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets partial data into an asset based on the given identifier, data_offset, data length and p_data.</p>
<p>Before calling this function, the asset must have been created with a call to <a class="el" href="#ae4e80382dbc1fb7d3370c6c82a93f90b">psa_ps_create</a>.</p>
<p>This function is optional. Not all PSA Protected Storage Implementations will implement this function. Consult the documentation of your chosen platform to determine if it is present.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uid</td><td>The unique identifier for the asset. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_offset</td><td>Offset within the asset to start the write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_length</td><td>The size in bytes of the data in p_data to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_data</td><td>Pointer to a buffer which contains the data to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">PSA_SUCCESS</td><td>If the asset exists, the input parameters are correct and the data is correctly written in the physical storage </td></tr>
    <tr><td class="paramname">PSA_ERROR_STORAGE_FAILURE</td><td>If the data is not written correctly in the physical storage </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_ARGUMENT</td><td>The operation failed because one or more of the given arguments were invalid (null pointer, wrong flags, etc) </td></tr>
    <tr><td class="paramname">PSA_ERROR_DOES_NOT_EXIST</td><td>The specified UID was not found </td></tr>
    <tr><td class="paramname">PSA_ERROR_NOT_SUPPORTED</td><td>The implementation of the API does not support this function </td></tr>
    <tr><td class="paramname">PSA_ERROR_GENERIC_ERROR</td><td>The operation failed due to an unspecified error </td></tr>
    <tr><td class="paramname">PSA_ERROR_DATA_CORRUPT</td><td>The operation failed because the existing data has been corrupted </td></tr>
    <tr><td class="paramname">PSA_ERROR_INVALID_SIGNATURE</td><td>The operation failed because the existing data failed authentication (MAC check failed) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_d00fafdb9414f6e624fcf4d73ffde065.html">platform</a></li><li class="navelem"><a class="el" href="dir_a72924067aea8bbead751f11070268f4.html">FEATURE_EXPERIMENTAL_API</a></li><li class="navelem"><a class="el" href="dir_007a19531d3d09289f9f9c2cf309e91b.html">FEATURE_PSA</a></li><li class="navelem"><a class="el" href="dir_05e0d8a557d855fa23572451f1c8ea18.html">TARGET_MBED_PSA_SRV</a></li><li class="navelem"><a class="el" href="dir_4873970fac28857be75ffc795d800217.html">inc</a></li><li class="navelem"><a class="el" href="dir_8dc47cca0505aa6837fa09ab8303288c.html">psa</a></li><li class="navelem"><a class="el" href="TARGET__MBED__PSA__SRV_2inc_2psa_2protected__storage_8h.html">protected_storage.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
