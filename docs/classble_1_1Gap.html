<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: ble::Gap Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classble_1_1Gap.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classble_1_1Gap-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ble::Gap Class Reference<div class="ingroups"><a class="el" href="group__ble.html">Ble</a> &raquo; <a class="el" href="group__gap.html">Gap</a></div></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Gap_8h_source.html">Gap.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble_1_1Gap_1_1PreferredConnectionParams__t.html">PreferredConnectionParams_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9905be3264ad7139e8f5ba27370091b1" id="r_a9905be3264ad7139e8f5ba27370091b1"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classFunctionPointerWithContext.html">FunctionPointerWithContext</a>&lt; const <a class="el" href="classble_1_1Gap.html">Gap</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9905be3264ad7139e8f5ba27370091b1">GapShutdownCallback_t</a></td></tr>
<tr class="separator:a9905be3264ad7139e8f5ba27370091b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9a8063f2828fcd1c2e324edcfcf14b" id="r_a3e9a8063f2828fcd1c2e324edcfcf14b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classCallChainOfFunctionPointersWithContext.html">CallChainOfFunctionPointersWithContext</a>&lt; const <a class="el" href="classble_1_1Gap.html">Gap</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e9a8063f2828fcd1c2e324edcfcf14b">GapShutdownCallbackChain_t</a></td></tr>
<tr class="separator:a3e9a8063f2828fcd1c2e324edcfcf14b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad4d75eef23362d474ac43db985d4bbbe" id="r_ad4d75eef23362d474ac43db985d4bbbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4d75eef23362d474ac43db985d4bbbe">setEventHandler</a> (<a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a> *handler)</td></tr>
<tr class="separator:ad4d75eef23362d474ac43db985d4bbbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3feae5e6af69f687854f0e87b14691ac" id="r_a3feae5e6af69f687854f0e87b14691ac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3feae5e6af69f687854f0e87b14691ac">isFeatureSupported</a> (<a class="el" href="structble_1_1controller__supported__features__t.html">controller_supported_features_t</a> feature)</td></tr>
<tr class="separator:a3feae5e6af69f687854f0e87b14691ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c77f99a22f4c2fc0266e348610c2c3" id="r_a15c77f99a22f4c2fc0266e348610c2c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15c77f99a22f4c2fc0266e348610c2c3">getAddress</a> (<a class="el" href="structble_1_1own__address__type__t.html">own_address_type_t</a> &amp;typeP, <a class="el" href="structble_1_1address__t.html">address_t</a> &amp;address)</td></tr>
<tr class="separator:a15c77f99a22f4c2fc0266e348610c2c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a6b34f15a8668272e7995cb6257cfb" id="r_a21a6b34f15a8668272e7995cb6257cfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21a6b34f15a8668272e7995cb6257cfb">reset</a> ()</td></tr>
<tr class="separator:a21a6b34f15a8668272e7995cb6257cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f145a661bd06baed703455770d57bbb" id="r_a4f145a661bd06baed703455770d57bbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f145a661bd06baed703455770d57bbb">onShutdown</a> (const <a class="el" href="#a9905be3264ad7139e8f5ba27370091b1">GapShutdownCallback_t</a> &amp;callback)</td></tr>
<tr class="separator:a4f145a661bd06baed703455770d57bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e18c3ab48d849f97a11c8792eb05bf1" id="r_a6e18c3ab48d849f97a11c8792eb05bf1"><td class="memTemplParams" colspan="2">template&lt;typename T&gt; </td></tr>
<tr class="memitem:a6e18c3ab48d849f97a11c8792eb05bf1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a6e18c3ab48d849f97a11c8792eb05bf1">onShutdown</a> (T *objPtr, void(T::*memberPtr)(const <a class="el" href="classble_1_1Gap.html">Gap</a> *))</td></tr>
<tr class="separator:a6e18c3ab48d849f97a11c8792eb05bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ad5ee12f35c19fc2c1314d0efcb205" id="r_ac2ad5ee12f35c19fc2c1314d0efcb205"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a3e9a8063f2828fcd1c2e324edcfcf14b">GapShutdownCallbackChain_t</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2ad5ee12f35c19fc2c1314d0efcb205">onShutdown</a> ()</td></tr>
<tr class="separator:ac2ad5ee12f35c19fc2c1314d0efcb205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f2e847af626010214ed1d6a0e4fdb0" id="r_a11f2e847af626010214ed1d6a0e4fdb0"><td class="memItemLeft" align="right" valign="top"><a id="a11f2e847af626010214ed1d6a0e4fdb0" name="a11f2e847af626010214ed1d6a0e4fdb0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Gap</b> (<a class="el" href="classble_1_1impl_1_1Gap.html">impl::Gap</a> *impl)</td></tr>
<tr class="separator:a11f2e847af626010214ed1d6a0e4fdb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1fbb5129a1341ba65d87a22d6bb18f" id="r_adb1fbb5129a1341ba65d87a22d6bb18f"><td class="memItemLeft" align="right" valign="top"><a id="adb1fbb5129a1341ba65d87a22d6bb18f" name="adb1fbb5129a1341ba65d87a22d6bb18f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Gap</b> (const <a class="el" href="classble_1_1Gap.html">Gap</a> &amp;)=delete</td></tr>
<tr class="separator:adb1fbb5129a1341ba65d87a22d6bb18f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0358cbef5b4ba5e33ab061bd189e4307" id="r_a0358cbef5b4ba5e33ab061bd189e4307"><td class="memItemLeft" align="right" valign="top"><a id="a0358cbef5b4ba5e33ab061bd189e4307" name="a0358cbef5b4ba5e33ab061bd189e4307"></a>
<a class="el" href="classble_1_1Gap.html">Gap</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classble_1_1Gap.html">Gap</a> &amp;)=delete</td></tr>
<tr class="separator:a0358cbef5b4ba5e33ab061bd189e4307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6eb819b89c3c1c04bae24bfe0567ee2" id="r_ac6eb819b89c3c1c04bae24bfe0567ee2"><td class="memItemLeft" align="right" valign="top"><a id="ac6eb819b89c3c1c04bae24bfe0567ee2" name="ac6eb819b89c3c1c04bae24bfe0567ee2"></a>
<a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>setRandomStaticAddress</b> (const <a class="el" href="structble_1_1address__t.html">ble::address_t</a> &amp;address)</td></tr>
<tr class="separator:ac6eb819b89c3c1c04bae24bfe0567ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc24f83254008214bba1379d50fa1a3d" id="r_afc24f83254008214bba1379d50fa1a3d"><td class="memItemLeft" align="right" valign="top"><a id="afc24f83254008214bba1379d50fa1a3d" name="afc24f83254008214bba1379d50fa1a3d"></a>
<a class="el" href="structble_1_1address__t.html">ble::address_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getRandomStaticAddress</b> ()</td></tr>
<tr class="separator:afc24f83254008214bba1379d50fa1a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0c23626a0999ef5aed69676361115a58" id="r_a0c23626a0999ef5aed69676361115a58"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c23626a0999ef5aed69676361115a58">getRandomAddressType</a> (<a class="el" href="structble_1_1address__t.html">ble::address_t</a> address, <a class="el" href="structble_1_1random__address__type__t.html">ble::random_address_type_t</a> *addressType)</td></tr>
<tr class="separator:a0c23626a0999ef5aed69676361115a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Define device discovery, connection and link management procedures.</p>
<ul>
<li>Device discovery: A device can advertise to nearby peers its existence, identity and capabilities. Similarly, a device can scan its environment to find advertising peers. The information acquired during the scan helps to identify peers and understand their use. A scanner may acquire more information about an advertising peer by sending a scan request. If the peer accepts scan requests, it may reply with additional information about its state.</li>
<li>Connection: A bluetooth device can establish a connection to a connectable advertising peer. Once the connection is established, both devices can communicate using the GATT protocol. The GATT protocol allows connected devices to expose a set of states that the other peer can discover, read and write.</li>
<li>Link Management: Connected devices may drop the connection and may adjust connection parameters according to the power envelop needed for their application.</li>
</ul>
<dl class="section user"><dt>Accessing gap</dt><dd></dd></dl>
<p>Instance of a <a class="el" href="classble_1_1Gap.html">Gap</a> class for a given <a class="el" href="classble_1_1BLE.html">BLE</a> device should be accessed using <a class="el" href="group__ble.html#gae7e37b21b1aca5d1b3e4fade0bbed7f2">BLE::gap()</a>. The reference returned remains valid until the <a class="el" href="classble_1_1BLE.html">BLE</a> instance shut down (see <a class="el" href="group__ble.html#gace635c5b15250c6e933401b753d335bf">BLE::shutdown()</a>).</p>
<div class="fragment"><div class="line"><span class="comment">// assuming ble_device has been initialized</span></div>
<div class="line"><a class="code hl_class" href="classble_1_1BLE.html">BLE</a>&amp; ble_device;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classble_1_1Gap.html">ble::Gap</a>&amp; gap = ble_device.<a class="code hl_function" href="group__ble.html#gae7e37b21b1aca5d1b3e4fade0bbed7f2">gap</a>();</div>
<div class="ttc" id="aclassble_1_1BLE_html"><div class="ttname"><a href="classble_1_1BLE.html">ble::BLE</a></div><div class="ttdef"><b>Definition</b> BLE.h:137</div></div>
<div class="ttc" id="aclassble_1_1Gap_html"><div class="ttname"><a href="classble_1_1Gap.html">ble::Gap</a></div><div class="ttdef"><b>Definition</b> Gap.h:282</div></div>
<div class="ttc" id="agroup__ble_html_gae7e37b21b1aca5d1b3e4fade0bbed7f2"><div class="ttname"><a href="group__ble.html#gae7e37b21b1aca5d1b3e4fade0bbed7f2">ble::BLE::gap</a></div><div class="ttdeci">ble::Gap &amp; gap()</div><div class="ttdef"><b>Definition</b> BLE.cpp:121</div></div>
</div><!-- fragment --><dl class="section user"><dt>Advertising</dt><dd></dd></dl>
<p>Advertising consists of broadcasting at a regular interval a small amount of data containing valuable information about the device. These packets may be scanned by peer devices listening on <a class="el" href="classble_1_1BLE.html">BLE</a> advertising channels.</p>
<p>Scanners may also request additional information from a device advertising by sending a scan request. If the broadcaster accepts scan requests, it can reply with a scan response packet containing additional information.</p>
<p>Advertising parameters are updated using setAdvertisingParams(). The main advertising payload is updated using setAdvertisingPayload(), and the scan response is updated using setAdvertisingScanResponse(). If the advertising is already updated, the data will take effect from the next advertising event.</p>
<p>To create a valid advertising payload and scan response, you may use <a class="el" href="classble_1_1AdvertisingDataBuilder.html">AdvertisingDataBuilder</a>. You must first allocate memory and create an <a class="el" href="structmbed_1_1Span.html">mbed::Span</a> and pass that into the <a class="el" href="classble_1_1AdvertisingDataBuilder.html">AdvertisingDataBuilder</a>, which will only be able to add as much data as fits in the provided buffer. The builder accepts any size of the buffer, but for the created data to be usable, it must be smaller than the maximum data length returned from getMaxAdvertisingDataLength().</p>
<p>Another option is to use <a class="el" href="classble_1_1AdvertisingDataSimpleBuilder.html">AdvertisingDataSimpleBuilder</a>, which allocates memory on the stack and offers a fluent interface at the expense of a reduced set of APIs and error management options.</p>
<dl class="section note"><dt>Note</dt><dd>Prior to Bluetooth 5, advertising and scanning payload size were limited to LEGACY_ADVERTISING_MAX_SIZE. It changed with Bluetooth 5, and now the maximum size of data that can be advertised depends on the controller. If you wish to be compatible with older devices, you may wish to advertise with the LEGACY_ADVERTISING_HANDLE. This uses payloads no larger than LEGACY_ADVERTISING_MAX_SIZE with that advertising set.</dd></dl>
<dl class="section user"><dt>Extended advertising</dt><dd></dd></dl>
<p>Extended advertising allows for a wider choice of options than legacy advertising. You can send bigger payloads and use different PHYs. This allows for bigger throughput or longer range.</p>
<p>Extended advertising may be split across many packets and takes place on both the regular advertising channels and the rest of the 37 channels normally used by connected devices.</p>
<p>The 3 channels used in legacy advertising are called primary advertisement channels. The remaining 37 channels are used for secondary advertising. Unlike sending data during a connection, this allows the device to broadcast data to multiple devices.</p>
<p>The advertising starts on the primary channels (which you may select) and continues on the secondary channels as indicated in the packet sent on the primary channel. This way, the advertising can send large payloads without saturating the advertising channels. Primary channels are limited to 1M and coded PHYs, but secondary channels may use the increased throughput 2M PHY.</p>
<dl class="section user"><dt>Periodic advertising</dt><dd></dd></dl>
<p>Similarly, you can use periodic advertising to transfer regular data to multiple devices.</p>
<p>The advertiser uses primary channels to advertise the information needed to listen to the periodic advertisements on secondary channels. This sync information will be used by the scanner who can now optimize for power consumption and only listen for the periodic advertisements at specified times.</p>
<p>Like extended advertising, periodic advertising offers extra PHY options of 2M and coded. The payload may be updated at any time and will be updated on the next advertisement event when the periodic advertising is active.</p>
<dl class="section user"><dt>Advertising sets</dt><dd></dd></dl>
<p>Advertisers may advertise multiple payloads at the same time. The configuration and identification of these is done through advertising sets. Use a handle obtained from createAvertisingSet() for advertising operations. After ending all advertising operations, remove the handle from the system using destroyAdvertisingHandle().</p>
<p>Extended advertising and periodic advertising is an optional feature, and not all devices support it. Some will only be able to see the now-called legacy advertising.</p>
<p>Legacy advertising is available through a special handle, LEGACY_ADVERTISING_HANDLE. This handle is always available, doesn't need to be created and can't be destroyed.</p>
<p>There is a limited number of advertising sets available because they require support from the controller. Their availability is dynamic and may be queried at any time using getMaxAdvertisingSetNumber(). Advertising sets take up resources even if they are not actively advertising right now, so it's important to destroy the set when you're done with it (or reuse it in the next advertisement).</p>
<p>Periodic advertising and extended advertising share the same set but not the same data. Extended advertising carries out periodic advertising synchronization information. Therefore, to let other devices be aware that your device exposes periodic advertising, you should start extended advertising of the set. Subsequently, you may disable extended advertising, and the periodic advertising will continue. If you start periodic advertising while extended advertising is inactive, periodic advertising won't start until you start extended advertising at a later time.</p>
<dl class="section user"><dt>Privacy</dt><dd></dd></dl>
<p>Privacy is a feature that allows a device to avoid being tracked by other (untrusted) devices. The device achieves it by periodically generating a new random address. The random address may be a resolvable random address, enabling trusted devices to recognize it as belonging to the same device. These trusted devices receive an Identity Resolution Key (IRK) during pairing. This is handled by the <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> and relies on the other device accepting and storing the IRK.</p>
<p>You need to enable privacy by calling enablePrivacy() after having initialized the <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> because privacy requires <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> to handle IRKs. The behavior of privacy enabled devices is set by using setCentralPrivacyConfiguration(), which specifies what the device should be with devices using random addresses. Random addresses generated by privacy enabled devices can be of two types: resolvable (by devices who have the IRK) and unresolvable. Unresolvable addresses can't be used for connecting and connectable advertising. Therefore, a resolvable one will be used for these regardless of the privacy configuration.</p>
<dl class="section user"><dt>Scanning</dt><dd></dd></dl>
<p>Scanning consists of listening for peer advertising packets. From a scan, a device can identify devices available in its environment.</p>
<p>If the device scans actively, then it will send scan request to scannable advertisers and collect their scan responses.</p>
<p>Scanning is done by creating <a class="el" href="classble_1_1ScanParameters.html">ScanParameters</a> and applying them with setScanParameters(). One configured, you may call startScan().</p>
<p>When a scanning device receives an advertising packet, it will call onAdvertisingReport() in the registered event handler. A whitelist may be used to limit the advertising reports by setting the correct policy in the scan parameters.</p>
<dl class="section user"><dt>Connection event handling</dt><dd></dd></dl>
<p>A peer may connect device advertising connectable packets. The advertising procedure ends as soon as the device is connected. If an advertising timeout has been set in the advertising parameters then onAdvertisingEnd will be called in the registered eventHandler when it runs out.</p>
<p>A device accepting a connection request from a peer is named a peripheral, and the device initiating the connection is named a central.</p>
<p>Connection is initiated by central devices. A call to connect() will result in the device scanning on any PHYs set in ConectionParamters passed in.</p>
<p>Peripheral and central receive a connection event when the connection is effective. If successful will result in a call to onConnectionComplete in the <a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a> registered with the <a class="el" href="classble_1_1Gap.html">Gap</a>.</p>
<p>It the connection attempt fails it will result in onConnectionComplete called on the central device with the event carrying the error flag.</p>
<dl class="section user"><dt>Changing the PHYsical transport of a connection</dt><dd></dd></dl>
<p>Once a connection has been established, it is possible to change the physical transport used between the local and the distant device. Changing the transport can either increase the bandwidth or increase the communication range. An increased bandwidth equals a better power consumption but also a loss in sensibility and therefore a degraded range.</p>
<p>Symmetrically an increased range means a lowered bandwidth and a degraded power consumption.</p>
<p>Applications can change the PHY used by calling the function setPhy. Once the update has been made the result is forwarded to the application by calling the function onPhyUpdateComplete of the event handler registered.</p>
<dl class="section user"><dt>disconnection</dt><dd></dd></dl>
<p>The application code initiates a disconnection when it calls the disconnect(Handle_t, DisconnectionReason_t) function.</p>
<p>Disconnection may also be initiated by the remote peer or the local controller/stack. To catch all disconnection events, application code may set up an handler taking care of disconnection events by calling onDisconnection().</p>
<dl class="section user"><dt>Modulation Schemes</dt><dd></dd></dl>
<p>When supported by the host and controller you can select different modulation schemes (</p><dl class="section see"><dt>See also</dt><dd>BLUETOOTH SPECIFICATION Version 5.0 | Vol 1, Part A - 1.2):<ul>
<li>LE 1M PHY</li>
<li>LE 2M PHY</li>
<li>LE coded PHY</li>
</ul>
</dd></dl>
<p>You may set preferred PHYs (separately for RX and TX) using setPreferredPhys(). You may also set the currently used PHYs on a selected connection using setPhy(). Both of these settings are only advisory and the controller is allowed to make its own decision on the best PHY to use based on your request, the peer's supported features and the connection's physical conditions.</p>
<p>You may query the currently used PHY using readPhy() which will return the result through a call to the registered event handler. You may register the handler with <a class="el" href="#ad4d75eef23362d474ac43db985d4bbbe">setEventHandler()</a>. The events inform about the currently used PHY and of any changes to PHYs which may be triggered autonomously by the controller or by the peer. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a9905be3264ad7139e8f5ba27370091b1" name="a9905be3264ad7139e8f5ba27370091b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9905be3264ad7139e8f5ba27370091b1">&#9670;&#160;</a></span>GapShutdownCallback_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classFunctionPointerWithContext.html">FunctionPointerWithContext</a>&lt;const <a class="el" href="classble_1_1Gap.html">Gap</a> *&gt; <a class="el" href="#a9905be3264ad7139e8f5ba27370091b1">ble::Gap::GapShutdownCallback_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classble_1_1Gap.html">Gap</a> shutdown event handler.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ac2ad5ee12f35c19fc2c1314d0efcb205">Gap::onShutdown()</a>. </dd></dl>

</div>
</div>
<a id="a3e9a8063f2828fcd1c2e324edcfcf14b" name="a3e9a8063f2828fcd1c2e324edcfcf14b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e9a8063f2828fcd1c2e324edcfcf14b">&#9670;&#160;</a></span>GapShutdownCallbackChain_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classCallChainOfFunctionPointersWithContext.html">CallChainOfFunctionPointersWithContext</a>&lt;const <a class="el" href="classble_1_1Gap.html">Gap</a> *&gt; <a class="el" href="#a3e9a8063f2828fcd1c2e324edcfcf14b">ble::Gap::GapShutdownCallbackChain_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callchain of gap shutdown event handler.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ac2ad5ee12f35c19fc2c1314d0efcb205">Gap::onShutdown()</a>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a15c77f99a22f4c2fc0266e348610c2c3" name="a15c77f99a22f4c2fc0266e348610c2c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15c77f99a22f4c2fc0266e348610c2c3">&#9670;&#160;</a></span>getAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::Gap::getAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structble_1_1own__address__type__t.html">own_address_type_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>typeP</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structble_1_1address__t.html">address_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>address</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetch the current address and its type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">typeP</td><td>Type of the current address set. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">address</td><td><a class="el" href="structble_1_1Value.html">Value</a> of the current address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If privacy is enabled the device address may be unavailable to application code.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE on success. </dd></dl>

</div>
</div>
<a id="a0c23626a0999ef5aed69676361115a58" name="a0c23626a0999ef5aed69676361115a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c23626a0999ef5aed69676361115a58">&#9670;&#160;</a></span>getRandomAddressType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::Gap::getRandomAddressType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structble_1_1address__t.html">ble::address_t</a></td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structble_1_1random__address__type__t.html">ble::random_address_type_t</a> *</td>          <td class="paramname"><span class="paramname"><em>addressType</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the type of a random address.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The random address to retrieve the type from. The address must be ordered in little endian.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">addressType</td><td>Type of the address to fill.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE in case of success or BLE_ERROR_INVALID_PARAM if the address in input was not identifiable as a random address. </dd></dl>

</div>
</div>
<a id="a3feae5e6af69f687854f0e87b14691ac" name="a3feae5e6af69f687854f0e87b14691ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3feae5e6af69f687854f0e87b14691ac">&#9670;&#160;</a></span>isFeatureSupported()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ble::Gap::isFeatureSupported </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structble_1_1controller__supported__features__t.html">controller_supported_features_t</a></td>          <td class="paramname"><span class="paramname"><em>feature</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check controller support for a specific feature.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">feature</td><td>Feature to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if feature is supported. </dd></dl>

</div>
</div>
<a id="ac2ad5ee12f35c19fc2c1314d0efcb205" name="ac2ad5ee12f35c19fc2c1314d0efcb205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ad5ee12f35c19fc2c1314d0efcb205">&#9670;&#160;</a></span>onShutdown() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a3e9a8063f2828fcd1c2e324edcfcf14b">Gap::GapShutdownCallbackChain_t</a> &amp; ble::Gap::onShutdown </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Access the callchain of shutdown event handler.</p>
<dl class="section note"><dt>Note</dt><dd>To register callbacks, use <a class="el" href="#ac2ad5ee12f35c19fc2c1314d0efcb205">onShutdown()</a>.add(callback).</dd>
<dd>
To unregister callbacks, use <a class="el" href="#ac2ad5ee12f35c19fc2c1314d0efcb205">onShutdown()</a>.detach(callback).</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A reference to the shutdown event callback chain. </dd></dl>

</div>
</div>
<a id="a4f145a661bd06baed703455770d57bbb" name="a4f145a661bd06baed703455770d57bbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f145a661bd06baed703455770d57bbb">&#9670;&#160;</a></span>onShutdown() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble::Gap::onShutdown </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#a9905be3264ad7139e8f5ba27370091b1">GapShutdownCallback_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>callback</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register a <a class="el" href="classble_1_1Gap.html">Gap</a> shutdown event handler.</p>
<p>The handler is called when the <a class="el" href="classble_1_1Gap.html">Gap</a> instance is about to shut down. It is usually issued after a call to <a class="el" href="group__ble.html#gace635c5b15250c6e933401b753d335bf">BLE::shutdown()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Shutdown event handler to register.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To unregister a shutdown event handler, use <a class="el" href="#ac2ad5ee12f35c19fc2c1314d0efcb205">onShutdown()</a>.detach(callback). </dd></dl>

</div>
</div>
<a id="a6e18c3ab48d849f97a11c8792eb05bf1" name="a6e18c3ab48d849f97a11c8792eb05bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e18c3ab48d849f97a11c8792eb05bf1">&#9670;&#160;</a></span>onShutdown() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ble::Gap::onShutdown </td>
          <td>(</td>
          <td class="paramtype">T *</td>          <td class="paramname"><span class="paramname"><em>objPtr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(T::*</td>          <td class="paramname"><span class="paramname"><em>memberPtr&#160;</em></span>)(const <a class="el" href="classble_1_1Gap.html">Gap</a> *)&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Register a <a class="el" href="classble_1_1Gap.html">Gap</a> shutdown event handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">objPtr</td><td>Instance used to invoke <code class="param">memberPtr</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">memberPtr</td><td>Shutdown event handler to register. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21a6b34f15a8668272e7995cb6257cfb" name="a21a6b34f15a8668272e7995cb6257cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21a6b34f15a8668272e7995cb6257cfb">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::Gap::reset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the <a class="el" href="classble_1_1Gap.html">Gap</a> instance.</p>
<p>Reset process starts by notifying all registered shutdown event handlers that the <a class="el" href="classble_1_1Gap.html">Gap</a> instance is about to be shut down. Then, it clears all <a class="el" href="classble_1_1Gap.html">Gap</a> state of the associated object and then cleans the state present in the vendor implementation.</p>
<p>This function is meant to be overridden in the platform-specific subclass. Nevertheless, the subclass only resets its state and not the data held in <a class="el" href="classble_1_1Gap.html">Gap</a> members. This is achieved by a call to <a class="el" href="#a21a6b34f15a8668272e7995cb6257cfb">Gap::reset()</a> from the subclass' <a class="el" href="#a21a6b34f15a8668272e7995cb6257cfb">reset()</a> implementation.</p>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE on success.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Currently, a call to <a class="el" href="#a21a6b34f15a8668272e7995cb6257cfb">reset()</a> does not reset the advertising and scan parameters to default values. </dd></dl>

</div>
</div>
<a id="ad4d75eef23362d474ac43db985d4bbbe" name="ad4d75eef23362d474ac43db985d4bbbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d75eef23362d474ac43db985d4bbbe">&#9670;&#160;</a></span>setEventHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble::Gap::setEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a> *</td>          <td class="paramname"><span class="paramname"><em>handler</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assign the event handler implementation that will be used by the gap module to signal events back to the application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Application implementation of an <a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Multiple discrete <a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a> instances may be used by adding them to a <a class="el" href="classChainableGapEventHandler.html">ChainableGapEventHandler</a> and then setting the chain as the primary <a class="el" href="classble_1_1Gap.html">Gap</a> <a class="el" href="structble_1_1Gap_1_1EventHandler.html">EventHandler</a> using this function.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classChainableGapEventHandler.html">ChainableGapEventHandler</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/FEATURE_BLE/include/ble/<a class="el" href="Gap_8h_source.html">Gap.h</a></li>
<li>/home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/FEATURE_BLE/source/<b>Gap.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceble.html">ble</a></li><li class="navelem"><a class="el" href="classble_1_1Gap.html">Gap</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
