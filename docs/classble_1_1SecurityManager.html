<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: ble::SecurityManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classble_1_1SecurityManager.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classble_1_1SecurityManager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ble::SecurityManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="SecurityManager_8h_source.html">SecurityManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aacde1096fc98fa27521894eb98b858c0" id="r_aacde1096fc98fa27521894eb98b858c0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aacde1096fc98fa27521894eb98b858c0">SecurityMode_t</a> { <br />
&#160;&#160;<b>SECURITY_MODE_NO_ACCESS</b>
, <a class="el" href="#aacde1096fc98fa27521894eb98b858c0ae48b7cd1f50b3424f71fd7b2709e9ac2">SECURITY_MODE_ENCRYPTION_OPEN_LINK</a>
, <a class="el" href="#aacde1096fc98fa27521894eb98b858c0a48e84487c00a82961c2e9155358ef5c0">SECURITY_MODE_ENCRYPTION_NO_MITM</a>
, <a class="el" href="#aacde1096fc98fa27521894eb98b858c0aab80aae63a97c525d060bf36ab589225">SECURITY_MODE_ENCRYPTION_WITH_MITM</a>
, <br />
&#160;&#160;<a class="el" href="#aacde1096fc98fa27521894eb98b858c0a9f950f977292568382b9cfe5c07a8963">SECURITY_MODE_SIGNED_NO_MITM</a>
, <a class="el" href="#aacde1096fc98fa27521894eb98b858c0aa93564b618b3b2a1435f5f1b7cef0717">SECURITY_MODE_SIGNED_WITH_MITM</a>
<br />
 }</td></tr>
<tr class="separator:aacde1096fc98fa27521894eb98b858c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c07957dd7438999d4f0a674f96f0f33" id="r_a0c07957dd7438999d4f0a674f96f0f33"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33">SecurityIOCapabilities_t</a> { <br />
&#160;&#160;<a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33acf31e4e557098e3e97df6ff028ad1f00">IO_CAPS_DISPLAY_ONLY</a> = 0x00
, <a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33aed964226bbb87ccea85319944e80ef5e">IO_CAPS_DISPLAY_YESNO</a> = 0x01
, <a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33abd476ae6040c5540e95cd8a29e8552ce">IO_CAPS_KEYBOARD_ONLY</a> = 0x02
, <a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33a1ac60724700d90539dc471e141034be9">IO_CAPS_NONE</a> = 0x03
, <br />
&#160;&#160;<a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33a52d02068632133c89b0f71b1731139cf">IO_CAPS_KEYBOARD_DISPLAY</a> = 0x04
<br />
 }</td></tr>
<tr class="separator:a0c07957dd7438999d4f0a674f96f0f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbfe08c0fd69a054a9ce680f48fc5ff8" id="r_afbfe08c0fd69a054a9ce680f48fc5ff8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8">SecurityCompletionStatus_t</a> { <br />
&#160;&#160;<a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a5b408f2b384463fc1e4962661d82e292">SEC_STATUS_SUCCESS</a> = 0x00
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a766d4a94bc0e2c119f63817d325ec4e7">SEC_STATUS_TIMEOUT</a> = 0x01
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a15a3aeb65996002ade253fe99ecff94b">SEC_STATUS_PDU_INVALID</a> = 0x02
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8ab59278288e56f155a477329394f4aa37">SEC_STATUS_PASSKEY_ENTRY_FAILED</a> = 0x81
, <br />
&#160;&#160;<a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a9104cb64f0d8ced7e3e32e81ed1c957f">SEC_STATUS_OOB_NOT_AVAILABLE</a> = 0x82
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8af5655f04fe6913255f7711ee6dad1f25">SEC_STATUS_AUTH_REQ</a> = 0x83
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8aa72cb2c1c7272f27c0c7901d7c6f038c">SEC_STATUS_CONFIRM_VALUE</a> = 0x84
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8aa66701c114de611db604303fcedd3bd2">SEC_STATUS_PAIRING_NOT_SUPP</a> = 0x85
, <br />
&#160;&#160;<a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8af2e899995496476bf272f4326b72e8a1">SEC_STATUS_ENC_KEY_SIZE</a> = 0x86
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a150de84d694ed86dfa1648bec48cca3f">SEC_STATUS_SMP_CMD_UNSUPPORTED</a> = 0x87
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a8fa5d072d11f813cb0811a9019d50c72">SEC_STATUS_UNSPECIFIED</a> = 0x88
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8ab4daa314ef1757b1b920ab4f82618077">SEC_STATUS_REPEATED_ATTEMPTS</a> = 0x89
, <br />
&#160;&#160;<a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a25d176254e11b63cd26543f0d366ce12">SEC_STATUS_INVALID_PARAMS</a> = 0x8A
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a185e9fba3e971bb34148a739b8d2afc2">SEC_STATUS_DHKEY_CHECK_FAILED</a> = 0x8B
, <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8a5b40464ef49599521dee1ff369234975">SEC_STATUS_COMPARISON_FAILED</a> = 0x8C
<br />
 }</td></tr>
<tr class="separator:afbfe08c0fd69a054a9ce680f48fc5ff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f5a49ddeb2e459e89c69668512da697" id="r_a3f5a49ddeb2e459e89c69668512da697"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a>[<a class="el" href="#aded8ceb88d32bd2c2b23c60941515e0e">PASSKEY_LEN</a>]</td></tr>
<tr class="separator:a3f5a49ddeb2e459e89c69668512da697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e4bccb042ed804638c638426ac7b8b" id="r_a32e4bccb042ed804638c638426ac7b8b"><td class="memItemLeft" align="right" valign="top"><a id="a32e4bccb042ed804638c638426ac7b8b" name="a32e4bccb042ed804638c638426ac7b8b"></a>
typedef <a class="el" href="classFunctionPointerWithContext.html">FunctionPointerWithContext</a>&lt; const <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>SecurityManagerShutdownCallback_t</b></td></tr>
<tr class="separator:a32e4bccb042ed804638c638426ac7b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa012bb7f474554fe842e2413c45930" id="r_a3fa012bb7f474554fe842e2413c45930"><td class="memItemLeft" align="right" valign="top"><a id="a3fa012bb7f474554fe842e2413c45930" name="a3fa012bb7f474554fe842e2413c45930"></a>
typedef <a class="el" href="classCallChainOfFunctionPointersWithContext.html">CallChainOfFunctionPointersWithContext</a>&lt; const <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>SecurityManagerShutdownCallbackChain_t</b></td></tr>
<tr class="separator:a3fa012bb7f474554fe842e2413c45930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cd90470bbc5a70e860fe78b2acd6e9f" id="r_a5cd90470bbc5a70e860fe78b2acd6e9f"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="namespaceble.html#a344d5b866aaa4db7fa859edcc01d3e65">ble::Keypress_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5cd90470bbc5a70e860fe78b2acd6e9f">Keypress_t</a></td></tr>
<tr class="separator:a5cd90470bbc5a70e860fe78b2acd6e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2c87bbd27615e8a3f23a6966d13f48d1" id="r_a2c87bbd27615e8a3f23a6966d13f48d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c87bbd27615e8a3f23a6966d13f48d1">init</a> (bool enableBonding=true, bool requireMITM=true, <a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33">SecurityIOCapabilities_t</a> iocaps=<a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33a1ac60724700d90539dc471e141034be9">IO_CAPS_NONE</a>, const <a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a> passkey=nullptr, bool signing=true, const char *dbFilepath=nullptr)</td></tr>
<tr class="separator:a2c87bbd27615e8a3f23a6966d13f48d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a94193e3f65df90d5c46fb18ff6583d" id="r_a2a94193e3f65df90d5c46fb18ff6583d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a94193e3f65df90d5c46fb18ff6583d">setDatabaseFilepath</a> (const char *dbFilepath=nullptr)</td></tr>
<tr class="separator:a2a94193e3f65df90d5c46fb18ff6583d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69bd541dc0178993b7a862bf9fa6b472" id="r_a69bd541dc0178993b7a862bf9fa6b472"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a69bd541dc0178993b7a862bf9fa6b472">reset</a> ()</td></tr>
<tr class="separator:a69bd541dc0178993b7a862bf9fa6b472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f44a9cbbb03f6a0185424df3b99eabc" id="r_a5f44a9cbbb03f6a0185424df3b99eabc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f44a9cbbb03f6a0185424df3b99eabc">preserveBondingStateOnReset</a> (bool enable)</td></tr>
<tr class="separator:a5f44a9cbbb03f6a0185424df3b99eabc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece649a2290c79d7740df5ee58fa6813" id="r_aece649a2290c79d7740df5ee58fa6813"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aece649a2290c79d7740df5ee58fa6813">writeBondingStateToPersistentStorage</a> ()</td></tr>
<tr class="separator:aece649a2290c79d7740df5ee58fa6813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55685c4f1a2493b67dafd0fbcb808fa" id="r_ae55685c4f1a2493b67dafd0fbcb808fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae55685c4f1a2493b67dafd0fbcb808fa">purgeAllBondingState</a> ()</td></tr>
<tr class="separator:ae55685c4f1a2493b67dafd0fbcb808fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6569401de4835a66130e55767e52ae" id="r_a1c6569401de4835a66130e55767e52ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1c6569401de4835a66130e55767e52ae">generateWhitelistFromBondTable</a> (<a class="el" href="structble_1_1whitelist__t.html">::ble::whitelist_t</a> *whitelist) const</td></tr>
<tr class="separator:a1c6569401de4835a66130e55767e52ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36fde8ef815c6df92a7afdb2ed1d00cd" id="r_a36fde8ef815c6df92a7afdb2ed1d00cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36fde8ef815c6df92a7afdb2ed1d00cd">cancelPairingRequest</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle)</td></tr>
<tr class="separator:a36fde8ef815c6df92a7afdb2ed1d00cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adabd4c2573c617e75377f444d7d9c612" id="r_adabd4c2573c617e75377f444d7d9c612"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adabd4c2573c617e75377f444d7d9c612">setPairingRequestAuthorisation</a> (bool required=true)</td></tr>
<tr class="separator:adabd4c2573c617e75377f444d7d9c612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc866793b81f478ad4e2d927434356d" id="r_a3bc866793b81f478ad4e2d927434356d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bc866793b81f478ad4e2d927434356d">getPeerIdentity</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle)</td></tr>
<tr class="separator:a3bc866793b81f478ad4e2d927434356d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b3e65759878a8052b02bfbd71b1709" id="r_ad1b3e65759878a8052b02bfbd71b1709"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1b3e65759878a8052b02bfbd71b1709">setIoCapability</a> (<a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33">SecurityIOCapabilities_t</a> iocaps)</td></tr>
<tr class="separator:ad1b3e65759878a8052b02bfbd71b1709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332de4c94da89e7ec934176c29e0f3e6" id="r_a332de4c94da89e7ec934176c29e0f3e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a332de4c94da89e7ec934176c29e0f3e6">setDisplayPasskey</a> (const <a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a> passkey)</td></tr>
<tr class="separator:a332de4c94da89e7ec934176c29e0f3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87df6defe8267cc2e53b968a9d511b1b" id="r_a87df6defe8267cc2e53b968a9d511b1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87df6defe8267cc2e53b968a9d511b1b">setLinkSecurity</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle, <a class="el" href="#aacde1096fc98fa27521894eb98b858c0">SecurityMode_t</a> securityMode)</td></tr>
<tr class="separator:a87df6defe8267cc2e53b968a9d511b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e5f18eebeb4b4c123f64bf2bbcdd348" id="r_a7e5f18eebeb4b4c123f64bf2bbcdd348"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7e5f18eebeb4b4c123f64bf2bbcdd348">setKeypressNotification</a> (bool <a class="el" href="wsf__trace_8c.html#ac03fb6d06b24f3219d4b7fc5fc919239">enabled</a>=true)</td></tr>
<tr class="separator:a7e5f18eebeb4b4c123f64bf2bbcdd348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9852660d8cff99513f88ec96c6a255da" id="r_a9852660d8cff99513f88ec96c6a255da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9852660d8cff99513f88ec96c6a255da">setHintFutureRoleReversal</a> (bool enable=true)</td></tr>
<tr class="separator:a9852660d8cff99513f88ec96c6a255da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7844015292cf3e5c683b565e14a7f83b" id="r_a7844015292cf3e5c683b565e14a7f83b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7844015292cf3e5c683b565e14a7f83b">getLinkEncryption</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle, <a class="el" href="structble_1_1link__encryption__t.html">ble::link_encryption_t</a> *encryption)</td></tr>
<tr class="separator:a7844015292cf3e5c683b565e14a7f83b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e2286cba9af3a6a80313cfc7bdb98ba" id="r_a2e2286cba9af3a6a80313cfc7bdb98ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2e2286cba9af3a6a80313cfc7bdb98ba">setLinkEncryption</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle, <a class="el" href="structble_1_1link__encryption__t.html">ble::link_encryption_t</a> encryption)</td></tr>
<tr class="separator:a2e2286cba9af3a6a80313cfc7bdb98ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8c205ade782edd538ed1a8992173bda" id="r_af8c205ade782edd538ed1a8992173bda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8c205ade782edd538ed1a8992173bda">setEncryptionKeyRequirements</a> (uint8_t minimumByteSize, uint8_t maximumByteSize)</td></tr>
<tr class="separator:af8c205ade782edd538ed1a8992173bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fccbf74cd70a674e8d854838ca8e03d" id="r_a8fccbf74cd70a674e8d854838ca8e03d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8fccbf74cd70a674e8d854838ca8e03d">getEncryptionKeySize</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">connection_handle_t</a> connectionHandle, uint8_t *size)</td></tr>
<tr class="separator:a8fccbf74cd70a674e8d854838ca8e03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a983d9ddb8e2852faf43aea39186cfddf" id="r_a983d9ddb8e2852faf43aea39186cfddf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a983d9ddb8e2852faf43aea39186cfddf">requestAuthentication</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle)</td></tr>
<tr class="separator:a983d9ddb8e2852faf43aea39186cfddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0125acf8f4b58773c1145e080489fe91" id="r_a0125acf8f4b58773c1145e080489fe91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0125acf8f4b58773c1145e080489fe91">generateOOB</a> (const <a class="el" href="structble_1_1address__t.html">ble::address_t</a> *address)</td></tr>
<tr class="separator:a0125acf8f4b58773c1145e080489fe91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2749570c3d9cb7f8c4fc01b9f52bb06" id="r_ae2749570c3d9cb7f8c4fc01b9f52bb06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2749570c3d9cb7f8c4fc01b9f52bb06">setOOBDataUsage</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle, bool useOOB, bool OOBProvidesMITM=true)</td></tr>
<tr class="separator:ae2749570c3d9cb7f8c4fc01b9f52bb06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ef30d5fc434a196c04fce0786be338" id="r_af6ef30d5fc434a196c04fce0786be338"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af6ef30d5fc434a196c04fce0786be338">passkeyEntered</a> (<a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a> connectionHandle, <a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a> passkey)</td></tr>
<tr class="separator:af6ef30d5fc434a196c04fce0786be338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7613fdaf48bba00dc968277e077b95ac" id="r_a7613fdaf48bba00dc968277e077b95ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7613fdaf48bba00dc968277e077b95ac">legacyPairingOobReceived</a> (const <a class="el" href="structble_1_1address__t.html">ble::address_t</a> *address, const <a class="el" href="namespaceble.html#a43692f37cdeddbefc3cb9d0ce89be6cb">ble::oob_tk_t</a> *tk)</td></tr>
<tr class="separator:a7613fdaf48bba00dc968277e077b95ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d6840f22eddcbb726f0cb04191eff8" id="r_ac9d6840f22eddcbb726f0cb04191eff8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9d6840f22eddcbb726f0cb04191eff8">onShutdown</a> (const <a class="el" href="classFunctionPointerWithContext.html">SecurityManagerShutdownCallback_t</a> &amp;callback)</td></tr>
<tr class="separator:ac9d6840f22eddcbb726f0cb04191eff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fd4b39437aee87c8b7a6d8ab83bab9" id="r_a51fd4b39437aee87c8b7a6d8ab83bab9"><td class="memTemplParams" colspan="2"><a id="a51fd4b39437aee87c8b7a6d8ab83bab9" name="a51fd4b39437aee87c8b7a6d8ab83bab9"></a>
template&lt;typename T&gt; </td></tr>
<tr class="memitem:a51fd4b39437aee87c8b7a6d8ab83bab9"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>onShutdown</b> (T *objPtr, void(T::*memberPtr)(const <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> *))</td></tr>
<tr class="separator:a51fd4b39437aee87c8b7a6d8ab83bab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4124937e14876db424bea8cdeb9514a8" id="r_a4124937e14876db424bea8cdeb9514a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCallChainOfFunctionPointersWithContext.html">SecurityManagerShutdownCallbackChain_t</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4124937e14876db424bea8cdeb9514a8">onShutdown</a> ()</td></tr>
<tr class="separator:a4124937e14876db424bea8cdeb9514a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa79d221276fec6619d5aebe3d73ea1d2" id="r_aa79d221276fec6619d5aebe3d73ea1d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa79d221276fec6619d5aebe3d73ea1d2">setSecurityManagerEventHandler</a> (<a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a> *handler)</td></tr>
<tr class="separator:aa79d221276fec6619d5aebe3d73ea1d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8fec987e83ad930396af2afbee74ed8" id="r_ad8fec987e83ad930396af2afbee74ed8"><td class="memItemLeft" align="right" valign="top"><a id="ad8fec987e83ad930396af2afbee74ed8" name="ad8fec987e83ad930396af2afbee74ed8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SecurityManager</b> (<a class="el" href="classble_1_1impl_1_1SecurityManager.html">impl::SecurityManager</a> *impl)</td></tr>
<tr class="separator:ad8fec987e83ad930396af2afbee74ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e015c5f9fcde7d6d99c13c00a60f9e" id="r_af6e015c5f9fcde7d6d99c13c00a60f9e"><td class="memItemLeft" align="right" valign="top"><a id="af6e015c5f9fcde7d6d99c13c00a60f9e" name="af6e015c5f9fcde7d6d99c13c00a60f9e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SecurityManager</b> (const <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> &amp;)=delete</td></tr>
<tr class="separator:af6e015c5f9fcde7d6d99c13c00a60f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02afb86757d4dc7c13b9ac518e8f5b0" id="r_af02afb86757d4dc7c13b9ac518e8f5b0"><td class="memItemLeft" align="right" valign="top"><a id="af02afb86757d4dc7c13b9ac518e8f5b0" name="af02afb86757d4dc7c13b9ac518e8f5b0"></a>
<a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> &amp;)=delete</td></tr>
<tr class="separator:af02afb86757d4dc7c13b9ac518e8f5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:aded8ceb88d32bd2c2b23c60941515e0e" id="r_aded8ceb88d32bd2c2b23c60941515e0e"><td class="memItemLeft" align="right" valign="top">static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aded8ceb88d32bd2c2b23c60941515e0e">PASSKEY_LEN</a> = 6</td></tr>
<tr class="separator:aded8ceb88d32bd2c2b23c60941515e0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Overview</p>
<p>Security Manager is used to provide link security through encryption, signing and authentication which are made possible by pairing and optionally bonding. Pairing is the process of establishing and/or exchanging keys used for the current connection. Bonding means saving this information so that it can later be used after reconnecting without having to pair again. This saves time and power.</p>
<dl class="section user"><dt>Paring</dt><dd></dd></dl>
<p>There are several ways to provide different levels of security during pairing depending on your requirements and the facilities provided by the application. The process starts with initialising the <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> with default options for new connections. Some settings can later be changed per link or globally.</p>
<p>The important settings in the init() function are the MITM requirement and IO capabilities. Man in the Middle (MITM) protection prevents an attack where one device can impersonate another device by pairing with both devices at the same time. This protection is achieved by sharing some information between the devices through some independent channel. The IO capabilities of both devices dictate what algorithm is used. For details </p><dl class="section see"><dt>See also</dt><dd>BLUETOOTH SPECIFICATION Version 5.0 | Vol 3, Part H - 2.3.5.1. You can change the IO capabilities after initialisation with <a class="el" href="#ad1b3e65759878a8052b02bfbd71b1709">setIoCapability()</a>. This will take effect for all subsequent pairings.</dd></dl>
<dl class="section user"><dt>Out of Band data used in pairing</dt><dd></dd></dl>
<p>Sharing this information through IO capabilities means user interaction which limits the degree of protection due to the limit of the amount of data that we can expect the user to transfer. Another solution is using OOB (out of band) communication to transfer this data instead which can send much more data making MITM attack even less likely to succeed. OOB data has to be exchanged by the application and provided to the Security Manager. Use <a class="el" href="#ae2749570c3d9cb7f8c4fc01b9f52bb06">setOOBDataUsage()</a> to indicate you want to use it. The same call also allows you to set whether or not the communication channel you are using to transmit the OOB data is itself secure against MITM protection - this will set the level of the link security achieved using pairing that uses this data.</p>
<p>The most secure pairing is provided by Secure Connections which relies on Elliptical Curve Cryptography. Support for Secure Connections is dependent on both the stack and controller on both sides supporting it. If either side doesn't support it Legacy Pairing will be used. This is an older standard of pairing. If higher security is required legacy pairing can be disabled by calling allowLegacyPairing(false);</p>
<dl class="section user"><dt>Signing</dt><dd></dd></dl>
<p>Applications may require a level of security providing confidence that data transfers are coming from a trusted source. This can be achieved by encrypting the link which also provides added confidentiality. Encryption is a good choice when a device stays connected but introduces latency due to the need of encrypting the link if the device only connects periodically to transfer data. If confidentiality is not required data GATT server may allow writes to happen over an unencrypted link but authenticated by a signature present in each packet. This signature relies on having sent a signing key to the peer during pairing prior to sending any signed packets.</p>
<dl class="section user"><dt>Persistence of Security information</dt><dd></dd></dl>
<p>Security Manager stores all the data required for its operation on active links. Depending on resources available on the device it will also attempt to store data for disconnected devices which have bonded to be reused when reconnected.</p>
<p>If the application has initialised a filesystem and the Security Manager has been provided with a filepath during the init() call it may also provide data persistence across resets. This must be enabled by calling <a class="el" href="#a5f44a9cbbb03f6a0185424df3b99eabc">preserveBondingStateOnReset()</a>. Persistence is not guaranteed and may fail if abnormally terminated. The Security Manager may also fall back to a non-persistent implementation if the resources are too limited.</p>
<dl class="section user"><dt>How to use</dt><dd></dd></dl>
<p>First thing you need to do is to initialise the manager by calling init() with your chosen settings.</p>
<p>The <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> communicates with your application through events. These will trigger calls in the <a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a> which you must provide by calling the <a class="el" href="#aa79d221276fec6619d5aebe3d73ea1d2">setSecurityManagerEventHandler()</a> function.</p>
<p>The most important process is pairing. This may be triggered manually by calling requestPairing() or may be called as a result of the application requiring encryption by calling <a class="el" href="#a2e2286cba9af3a6a80313cfc7bdb98ba">setLinkEncryption()</a> or as a result of the application requiring MITM protection through <a class="el" href="#a983d9ddb8e2852faf43aea39186cfddf">requestAuthentication()</a>.</p>
<p>All these can be implicitly called by using <a class="el" href="#a87df6defe8267cc2e53b968a9d511b1b">setLinkSecurity()</a> to conveniently set the required security for the link. The <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> will trigger all the process required to achieve the set security level. Security level can only be escalated. Asking the Security Manager for a lower security level than the existing one will not fail but will result in a event informing the application through linkEncryptionResult() of the current level (which remains unchanged).</p>
<p>Depending on the IO capabilities and OOB usage settings different pairing algorithms will be chosen. They will produce appropriate events which must be handled by your <a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a>. If your event handler doesn't support all the calls you must not set IO capabilities or set OOB usage in such a way that would trigger them or else the pairing will fail (usually by timing out).</p>
<p>The simplest example is a pairing of a device with no IO capabilities and no OOB data available. With such limited pairing capabilities the "just works" method will be employed. This does not provide any MITM protection. The pairing (triggered implicitly or called explicitly) will result in an event being generated on the peer calling pairingRequest(). The event handler must make a decision (either in the application itself or based on user interaction) whether to accept the pairing and call accetPairing() or cancelPairing(). The result will be communicated on both peers through an event calling pairingResult() in the <a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a>.</p>
<dl class="section user"><dt>Sequence diagrams</dt><dd></dd></dl>
<p>Sequence diagram "Just Works" pairing</p>
<pre class="fragment">*  /-------- Device 1 ---------\  *----- BLE link -----*  /----------- Device 2-----------\
*
* App  EventHandler      SecurityManager            SecurityManager    EventHandler      App
*  |        |                  |                          |                 |             |
*  |-------------------&gt; requestPairing()                 |                 |             |
*  |        |                  |-----[pairing start]-----&gt;|                 |             |
*  |        |                  |                          |---------&gt; pairingRequest() --&gt;|
*  |        |                  |                   acceptPairing() &lt;--------------------- |
*  |        |                  |&lt;--[pairing complete]----&gt;|                 |             |
*  |&lt;- pairingResult() &lt;-------|                          |---------&gt; pairingResult() ---&gt;|
*  |        |                  |                          |                 |             |
* </pre><dl class="section note"><dt>Note</dt><dd>the requestPairing() call isn't required to trigger pairing. Pairing will also be triggered if you request encryption and authentication and no bonding information is available. The sequence will be the same save for the lack of explicit requestPairing() call.</dd></dl>
<p>Sequence diagram Encryption request when bonding information is available</p>
<pre class="fragment">*  /--------- Device 1 ---------\  *------ BLE link ------*  /--------- Device 2 ---------\
*
* App  EventHandler       SecurityManager              SecurityManager   EventHandler    App
*  |       |                    |                            |                |           |
*  |--------------------&gt; setLinkEncryption()                |                |           |
*  |       |                    |&lt;-[encryption established]-&gt;|                |           |
*  |&lt;- linkEncryptionResult() &lt;-|                            |-&gt; linkEncryptionResult() -&gt;|
*  |       |                    |                            |                |           |
* </pre><dl class="section note"><dt>Note</dt><dd>if bonding information is not available, pairing will be triggered</dd></dl>
<p>Sequence diagram for Secure Connections passkey entry pairing with one device having a display only and other a keyboard</p>
<pre class="fragment">*  /---- Device 1 (keyboard) ---\  *------ BLE link ------*  /----- Device 2 (display) ---\
*
* App  EventHandler       SecurityManager              SecurityManager  EventHandler     App
*  |       |                    |                            |               |            |
*  |--------------------&gt; requestPairing()                   |               |            |
*  |        |                   |------[pairing start]------&gt;|               |            |
*  |        |                   |                            |-------&gt; pairingRequest() -&gt;|
*  |        |                   |                        acceptPairing() &lt;--------------- |
*  |        |                   |&lt;---[secure con. pairing]--&gt;|               |            |
*  |&lt;- passkeyRequest() &lt;-------|                            |-------&gt; passkeyDisplay() -&gt;|
*  |        |                   |                            |               |            |
*
*                  user reads the passkey on Device 2 and inputs it on Device 1
*
*  |        |                   |                            |               |            |
*  |-------------------&gt;passkeyEntered()                     |               |            |
*  |        |                   |&lt;---[pairing complete]-----&gt;|               |            |
*  |&lt;- pairingResult() &lt;--------|                            |-------&gt; pairingResult() --&gt;|
*  |        |                   |                            |               |            |
* </pre> </div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a5cd90470bbc5a70e860fe78b2acd6e9f" name="a5cd90470bbc5a70e860fe78b2acd6e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cd90470bbc5a70e860fe78b2acd6e9f">&#9670;&#160;</a></span>Keypress_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="namespaceble.html#a344d5b866aaa4db7fa859edcc01d3e65">ble::Keypress_t</a> <a class="el" href="namespaceble.html#a344d5b866aaa4db7fa859edcc01d3e65">ble::SecurityManager::Keypress_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For backwards compatibility. This enum is now in BLETypes.h </p><dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000577">Deprecated</a></b></dt><dd>use the enum in ble namespace </dd></dl>

</div>
</div>
<a id="a3f5a49ddeb2e459e89c69668512da697" name="a3f5a49ddeb2e459e89c69668512da697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f5a49ddeb2e459e89c69668512da697">&#9670;&#160;</a></span>Passkey_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t ble::SecurityManager::Passkey_t[<a class="el" href="#aded8ceb88d32bd2c2b23c60941515e0e">PASSKEY_LEN</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>6-digit passkey in ASCII ('0'-'9' digits only). </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="afbfe08c0fd69a054a9ce680f48fc5ff8" name="afbfe08c0fd69a054a9ce680f48fc5ff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbfe08c0fd69a054a9ce680f48fc5ff8">&#9670;&#160;</a></span>SecurityCompletionStatus_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#afbfe08c0fd69a054a9ce680f48fc5ff8">ble::SecurityManager::SecurityCompletionStatus_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Result of security requests </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a5b408f2b384463fc1e4962661d82e292" name="afbfe08c0fd69a054a9ce680f48fc5ff8a5b408f2b384463fc1e4962661d82e292"></a>SEC_STATUS_SUCCESS&#160;</td><td class="fielddoc"><p>Procedure completed with success. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a766d4a94bc0e2c119f63817d325ec4e7" name="afbfe08c0fd69a054a9ce680f48fc5ff8a766d4a94bc0e2c119f63817d325ec4e7"></a>SEC_STATUS_TIMEOUT&#160;</td><td class="fielddoc"><p>Procedure timed out. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a15a3aeb65996002ade253fe99ecff94b" name="afbfe08c0fd69a054a9ce680f48fc5ff8a15a3aeb65996002ade253fe99ecff94b"></a>SEC_STATUS_PDU_INVALID&#160;</td><td class="fielddoc"><p>Invalid PDU received. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8ab59278288e56f155a477329394f4aa37" name="afbfe08c0fd69a054a9ce680f48fc5ff8ab59278288e56f155a477329394f4aa37"></a>SEC_STATUS_PASSKEY_ENTRY_FAILED&#160;</td><td class="fielddoc"><p>Passkey entry failed (user cancelled or other). </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a9104cb64f0d8ced7e3e32e81ed1c957f" name="afbfe08c0fd69a054a9ce680f48fc5ff8a9104cb64f0d8ced7e3e32e81ed1c957f"></a>SEC_STATUS_OOB_NOT_AVAILABLE&#160;</td><td class="fielddoc"><p>Out of Band Key not available. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8af5655f04fe6913255f7711ee6dad1f25" name="afbfe08c0fd69a054a9ce680f48fc5ff8af5655f04fe6913255f7711ee6dad1f25"></a>SEC_STATUS_AUTH_REQ&#160;</td><td class="fielddoc"><p>Authentication requirements not met. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8aa72cb2c1c7272f27c0c7901d7c6f038c" name="afbfe08c0fd69a054a9ce680f48fc5ff8aa72cb2c1c7272f27c0c7901d7c6f038c"></a>SEC_STATUS_CONFIRM_VALUE&#160;</td><td class="fielddoc"><p>Confirm value failed. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8aa66701c114de611db604303fcedd3bd2" name="afbfe08c0fd69a054a9ce680f48fc5ff8aa66701c114de611db604303fcedd3bd2"></a>SEC_STATUS_PAIRING_NOT_SUPP&#160;</td><td class="fielddoc"><p>Pairing not supported. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8af2e899995496476bf272f4326b72e8a1" name="afbfe08c0fd69a054a9ce680f48fc5ff8af2e899995496476bf272f4326b72e8a1"></a>SEC_STATUS_ENC_KEY_SIZE&#160;</td><td class="fielddoc"><p>Encryption key size. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a150de84d694ed86dfa1648bec48cca3f" name="afbfe08c0fd69a054a9ce680f48fc5ff8a150de84d694ed86dfa1648bec48cca3f"></a>SEC_STATUS_SMP_CMD_UNSUPPORTED&#160;</td><td class="fielddoc"><p>Unsupported SMP command. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a8fa5d072d11f813cb0811a9019d50c72" name="afbfe08c0fd69a054a9ce680f48fc5ff8a8fa5d072d11f813cb0811a9019d50c72"></a>SEC_STATUS_UNSPECIFIED&#160;</td><td class="fielddoc"><p>Unspecified reason. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8ab4daa314ef1757b1b920ab4f82618077" name="afbfe08c0fd69a054a9ce680f48fc5ff8ab4daa314ef1757b1b920ab4f82618077"></a>SEC_STATUS_REPEATED_ATTEMPTS&#160;</td><td class="fielddoc"><p>Too little time elapsed since last attempt. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a25d176254e11b63cd26543f0d366ce12" name="afbfe08c0fd69a054a9ce680f48fc5ff8a25d176254e11b63cd26543f0d366ce12"></a>SEC_STATUS_INVALID_PARAMS&#160;</td><td class="fielddoc"><p>Invalid parameters. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a185e9fba3e971bb34148a739b8d2afc2" name="afbfe08c0fd69a054a9ce680f48fc5ff8a185e9fba3e971bb34148a739b8d2afc2"></a>SEC_STATUS_DHKEY_CHECK_FAILED&#160;</td><td class="fielddoc"><p>DHKey received doesn’t match locally calculated one. </p>
</td></tr>
<tr><td class="fieldname"><a id="afbfe08c0fd69a054a9ce680f48fc5ff8a5b40464ef49599521dee1ff369234975" name="afbfe08c0fd69a054a9ce680f48fc5ff8a5b40464ef49599521dee1ff369234975"></a>SEC_STATUS_COMPARISON_FAILED&#160;</td><td class="fielddoc"><p>Values in the numeric comparison protocol do not match. </p>
</td></tr>
</table>

</div>
</div>
<a id="a0c07957dd7438999d4f0a674f96f0f33" name="a0c07957dd7438999d4f0a674f96f0f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c07957dd7438999d4f0a674f96f0f33">&#9670;&#160;</a></span>SecurityIOCapabilities_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33">ble::SecurityManager::SecurityIOCapabilities_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Input/output capability of the device and application </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0c07957dd7438999d4f0a674f96f0f33acf31e4e557098e3e97df6ff028ad1f00" name="a0c07957dd7438999d4f0a674f96f0f33acf31e4e557098e3e97df6ff028ad1f00"></a>IO_CAPS_DISPLAY_ONLY&#160;</td><td class="fielddoc"><p>Display only. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0c07957dd7438999d4f0a674f96f0f33aed964226bbb87ccea85319944e80ef5e" name="a0c07957dd7438999d4f0a674f96f0f33aed964226bbb87ccea85319944e80ef5e"></a>IO_CAPS_DISPLAY_YESNO&#160;</td><td class="fielddoc"><p>Display and yes/no entry. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0c07957dd7438999d4f0a674f96f0f33abd476ae6040c5540e95cd8a29e8552ce" name="a0c07957dd7438999d4f0a674f96f0f33abd476ae6040c5540e95cd8a29e8552ce"></a>IO_CAPS_KEYBOARD_ONLY&#160;</td><td class="fielddoc"><p>Keyboard only. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0c07957dd7438999d4f0a674f96f0f33a1ac60724700d90539dc471e141034be9" name="a0c07957dd7438999d4f0a674f96f0f33a1ac60724700d90539dc471e141034be9"></a>IO_CAPS_NONE&#160;</td><td class="fielddoc"><p>No I/O capabilities. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0c07957dd7438999d4f0a674f96f0f33a52d02068632133c89b0f71b1731139cf" name="a0c07957dd7438999d4f0a674f96f0f33a52d02068632133c89b0f71b1731139cf"></a>IO_CAPS_KEYBOARD_DISPLAY&#160;</td><td class="fielddoc"><p>Keyboard and display. </p>
</td></tr>
</table>

</div>
</div>
<a id="aacde1096fc98fa27521894eb98b858c0" name="aacde1096fc98fa27521894eb98b858c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacde1096fc98fa27521894eb98b858c0">&#9670;&#160;</a></span>SecurityMode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#aacde1096fc98fa27521894eb98b858c0">ble::SecurityManager::SecurityMode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>level of security required from the link by the application </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aacde1096fc98fa27521894eb98b858c0ae48b7cd1f50b3424f71fd7b2709e9ac2" name="aacde1096fc98fa27521894eb98b858c0ae48b7cd1f50b3424f71fd7b2709e9ac2"></a>SECURITY_MODE_ENCRYPTION_OPEN_LINK&#160;</td><td class="fielddoc"><p>Require no protection, open link. </p>
</td></tr>
<tr><td class="fieldname"><a id="aacde1096fc98fa27521894eb98b858c0a48e84487c00a82961c2e9155358ef5c0" name="aacde1096fc98fa27521894eb98b858c0a48e84487c00a82961c2e9155358ef5c0"></a>SECURITY_MODE_ENCRYPTION_NO_MITM&#160;</td><td class="fielddoc"><p>Require encryption, but no MITM protection. </p>
</td></tr>
<tr><td class="fieldname"><a id="aacde1096fc98fa27521894eb98b858c0aab80aae63a97c525d060bf36ab589225" name="aacde1096fc98fa27521894eb98b858c0aab80aae63a97c525d060bf36ab589225"></a>SECURITY_MODE_ENCRYPTION_WITH_MITM&#160;</td><td class="fielddoc"><p>Require encryption and MITM protection. </p>
</td></tr>
<tr><td class="fieldname"><a id="aacde1096fc98fa27521894eb98b858c0a9f950f977292568382b9cfe5c07a8963" name="aacde1096fc98fa27521894eb98b858c0a9f950f977292568382b9cfe5c07a8963"></a>SECURITY_MODE_SIGNED_NO_MITM&#160;</td><td class="fielddoc"><p>Require signing or encryption, but no MITM protection. </p>
</td></tr>
<tr><td class="fieldname"><a id="aacde1096fc98fa27521894eb98b858c0aa93564b618b3b2a1435f5f1b7cef0717" name="aacde1096fc98fa27521894eb98b858c0aa93564b618b3b2a1435f5f1b7cef0717"></a>SECURITY_MODE_SIGNED_WITH_MITM&#160;</td><td class="fielddoc"><p>Require signing or encryption, and MITM protection. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a36fde8ef815c6df92a7afdb2ed1d00cd" name="a36fde8ef815c6df92a7afdb2ed1d00cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36fde8ef815c6df92a7afdb2ed1d00cd">&#9670;&#160;</a></span>cancelPairingRequest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::cancelPairingRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reject pairing request if the local device is the slave or cancel an outstanding pairing request if master.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>EventHandler::pairingRequest() </dd></dl>

</div>
</div>
<a id="a0125acf8f4b58773c1145e080489fe91" name="a0125acf8f4b58773c1145e080489fe91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0125acf8f4b58773c1145e080489fe91">&#9670;&#160;</a></span>generateOOB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::generateOOB </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble_1_1address__t.html">ble::address_t</a> *</td>          <td class="paramname"><span class="paramname"><em>address</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate OOB data with the given address. If Secure Connections is supported this will also generate Secure Connections OOB data on top of legacy pairing OOB data. This can be used to generate such data before the connection takes place.</p>
<p>In this model the OOB exchange takes place before the devices connect. Devices should establish communication over another channel and exchange the OOB data. The address provided will be used by the peer to associate the received data with the address of the device it will then connect to over <a class="el" href="classble_1_1BLE.html">BLE</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The local address you will use in the connection using this OOB data. This address will be returned along with the rest of the OOB data when generation is complete. Using an invalid address is illegal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#ab160e5a26c7a144549b2e35350a130c8">EventHandler::oobGenerated()</a> </dd></dl>

</div>
</div>
<a id="a1c6569401de4835a66130e55767e52ae" name="a1c6569401de4835a66130e55767e52ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6569401de4835a66130e55767e52ae">&#9670;&#160;</a></span>generateWhitelistFromBondTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::generateWhitelistFromBondTable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structble_1_1whitelist__t.html">::ble::whitelist_t</a> *</td>          <td class="paramname"><span class="paramname"><em>whitelist</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a list of addresses from all peers in the bond table and generate an event which returns it as a whitelist. Pass in the container for the whitelist. This will be returned by the event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">whitelist</td><td>Preallocated whitelist which will be filled up to its capacity. If whitelist already contains entries this will be appended to. Do not access the whitelist until callback has been called, returning the filled whitelist.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BLE_ERROR_NONE</td><td>On success, else an error code indicating reason for failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8fccbf74cd70a674e8d854838ca8e03d" name="a8fccbf74cd70a674e8d854838ca8e03d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fccbf74cd70a674e8d854838ca8e03d">&#9670;&#160;</a></span>getEncryptionKeySize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::getEncryptionKeySize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get encryption key size for given connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>Returns the key size in bits.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="a7844015292cf3e5c683b565e14a7f83b" name="a7844015292cf3e5c683b565e14a7f83b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7844015292cf3e5c683b565e14a7f83b">&#9670;&#160;</a></span>getLinkEncryption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::getLinkEncryption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structble_1_1link__encryption__t.html">ble::link_encryption_t</a> *</td>          <td class="paramname"><span class="paramname"><em>encryption</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current state of encryption on the link.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">encryption</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="a3bc866793b81f478ad4e2d927434356d" name="a3bc866793b81f478ad4e2d927434356d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc866793b81f478ad4e2d927434356d">&#9670;&#160;</a></span>getPeerIdentity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::getPeerIdentity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve identity address for the peer on the given connection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#ae8cf999561c08e03c17c55bbc98d0e52">EventHandler::peerIdentity()</a> </dd></dl>

</div>
</div>
<a id="a2c87bbd27615e8a3f23a6966d13f48d1" name="a2c87bbd27615e8a3f23a6966d13f48d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c87bbd27615e8a3f23a6966d13f48d1">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::init </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enableBonding</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>requireMITM</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33">SecurityIOCapabilities_t</a></td>          <td class="paramname"><span class="paramname"><em>iocaps</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33a1ac60724700d90539dc471e141034be9">IO_CAPS_NONE</a></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a></td>          <td class="paramname"><span class="paramname"><em>passkey</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>signing</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>dbFilepath</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable the <a class="el" href="classble_1_1BLE.html">BLE</a> stack's Security Manager. The Security Manager implements the actual cryptographic algorithms and protocol exchanges that allow two devices to securely exchange data and privately detect each other. Calling this API is a prerequisite for encryption and pairing (bonding).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enableBonding</td><td>Allow for bonding. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">requireMITM</td><td>Require protection for man-in-the-middle attacks. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">iocaps</td><td>To specify the I/O capabilities of this peripheral, such as availability of a display or keyboard, to support out-of-band exchanges of security data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">passkey</td><td>To specify a static passkey. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">signing</td><td>Generate and distribute signing key during pairing </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dbFilepath</td><td>Path to the file used to store keys in the filesystem, if NULL keys will be only stored in memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE on success. </dd></dl>

</div>
</div>
<a id="a7613fdaf48bba00dc968277e077b95ac" name="a7613fdaf48bba00dc968277e077b95ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7613fdaf48bba00dc968277e077b95ac">&#9670;&#160;</a></span>legacyPairingOobReceived()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::legacyPairingOobReceived </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble_1_1address__t.html">ble::address_t</a> *</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceble.html#a43692f37cdeddbefc3cb9d0ce89be6cb">ble::oob_tk_t</a> *</td>          <td class="paramname"><span class="paramname"><em>tk</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Supply the stack with the OOB data for legacy connections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>address of the peer device this data comes from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tk</td><td>pointer to out of band data received containing the temporary key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>legacyPairingOobRequest </dd></dl>

</div>
</div>
<a id="a4124937e14876db424bea8cdeb9514a8" name="a4124937e14876db424bea8cdeb9514a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4124937e14876db424bea8cdeb9514a8">&#9670;&#160;</a></span>onShutdown() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCallChainOfFunctionPointersWithContext.html">SecurityManager::SecurityManagerShutdownCallbackChain_t</a> &amp; ble::SecurityManager::onShutdown </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provide access to the callchain of shutdown event callbacks. It is possible to register callbacks using <a class="el" href="#a4124937e14876db424bea8cdeb9514a8">onShutdown()</a>.add(callback). It is possible to unregister callbacks using <a class="el" href="#a4124937e14876db424bea8cdeb9514a8">onShutdown()</a>.detach(callback).</p>
<dl class="section return"><dt>Returns</dt><dd>The shutdown event callbacks chain </dd></dl>

</div>
</div>
<a id="ac9d6840f22eddcbb726f0cb04191eff8" name="ac9d6840f22eddcbb726f0cb04191eff8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d6840f22eddcbb726f0cb04191eff8">&#9670;&#160;</a></span>onShutdown() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble::SecurityManager::onShutdown </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFunctionPointerWithContext.html">SecurityManagerShutdownCallback_t</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>callback</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup a callback to be invoked to notify the user application that the <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> instance is about to shutdown (possibly as a result of a call to <a class="el" href="group__ble.html#gace635c5b15250c6e933401b753d335bf">BLE::shutdown()</a>).</p>
<dl class="section note"><dt>Note</dt><dd>It is possible to chain together multiple onShutdown callbacks (potentially from different modules of an application) to be notified before the <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> is shutdown.</dd>
<dd>
It is also possible to set up a callback into a member function of some object.</dd>
<dd>
It is possible to unregister a callback using <a class="el" href="#a4124937e14876db424bea8cdeb9514a8">onShutdown()</a>.detach(callback) </dd></dl>

</div>
</div>
<a id="af6ef30d5fc434a196c04fce0786be338" name="af6ef30d5fc434a196c04fce0786be338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6ef30d5fc434a196c04fce0786be338">&#9670;&#160;</a></span>passkeyEntered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::passkeyEntered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a></td>          <td class="paramname"><span class="paramname"><em>passkey</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Supply the stack with the user entered passkey.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">passkey</td><td>ASCII string of digits entered by the user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#a65a3c1eb75c86a8654be356823861d62">EventHandler::passkeyRequest()</a> </dd></dl>

</div>
</div>
<a id="a5f44a9cbbb03f6a0185424df3b99eabc" name="a5f44a9cbbb03f6a0185424df3b99eabc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f44a9cbbb03f6a0185424df3b99eabc">&#9670;&#160;</a></span>preserveBondingStateOnReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::preserveBondingStateOnReset </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enable</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Normally all bonding information is lost when device is reset, this requests that the stack attempts to save the information and reload it during initialisation. This is not guaranteed.</p>
<dl class="section note"><dt>Note</dt><dd>This option is itself saved together with bonding data. When data is read after reset, the state of this option decides if data should be restored. If this option has not been saved the data will not be restored even if partial data is present.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enable</td><td>if true the stack will attempt to preserve bonding information on reset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="ae55685c4f1a2493b67dafd0fbcb808fa" name="ae55685c4f1a2493b67dafd0fbcb808fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae55685c4f1a2493b67dafd0fbcb808fa">&#9670;&#160;</a></span>purgeAllBondingState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::purgeAllBondingState </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all peer device context and all related bonding information from the database within the security manager.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">BLE_ERROR_NONE</td><td>On success, else an error code indicating reason for failure. </td></tr>
    <tr><td class="paramname">BLE_ERROR_INVALID_STATE</td><td>If the API is called without module initialization or application registration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a983d9ddb8e2852faf43aea39186cfddf" name="a983d9ddb8e2852faf43aea39186cfddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a983d9ddb8e2852faf43aea39186cfddf">&#9670;&#160;</a></span>requestAuthentication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::requestAuthentication </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Request that the link be authenticated (keys with MITM protection). This might trigger encryption or pairing/re-pairing. The success will be indicated through an event indicating security level change.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#ae1e127f1d33c5ddbafb375bc01d914e6">EventHandler::linkEncryptionResult()</a> </dd>
<dd>
<a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#a27f6511ff85720f02b8883ad32cbb7cf">EventHandler::pairingResult()</a> </dd></dl>

</div>
</div>
<a id="a69bd541dc0178993b7a862bf9fa6b472" name="a69bd541dc0178993b7a862bf9fa6b472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69bd541dc0178993b7a862bf9fa6b472">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::reset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notify all registered onShutdown callbacks that the <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> is about to be shutdown and clear all <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> state of the associated object.</p>
<p>This function is meant to be overridden in the platform-specific sub-class. Nevertheless, the sub-class is only expected to reset its state and not the data held in <a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a> members. This shall be achieved by a call to <a class="el" href="#a69bd541dc0178993b7a862bf9fa6b472">SecurityManager::reset()</a> from the sub-class' <a class="el" href="#a69bd541dc0178993b7a862bf9fa6b472">reset()</a> implementation.</p>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE on success. </dd></dl>

</div>
</div>
<a id="a2a94193e3f65df90d5c46fb18ff6583d" name="a2a94193e3f65df90d5c46fb18ff6583d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a94193e3f65df90d5c46fb18ff6583d">&#9670;&#160;</a></span>setDatabaseFilepath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setDatabaseFilepath </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>dbFilepath</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change the file used for the security database. If path is invalid or a NULL is passed keys will only be stored in memory.</p>
<dl class="section note"><dt>Note</dt><dd>This operation is only allowed with no active connections.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dbFilepath</td><td>Path to the file used to store keys in the filesystem, if NULL keys will be only stored in memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE on success. </dd></dl>

</div>
</div>
<a id="a332de4c94da89e7ec934176c29e0f3e6" name="a332de4c94da89e7ec934176c29e0f3e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a332de4c94da89e7ec934176c29e0f3e6">&#9670;&#160;</a></span>setDisplayPasskey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setDisplayPasskey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="#a3f5a49ddeb2e459e89c69668512da697">Passkey_t</a></td>          <td class="paramname"><span class="paramname"><em>passkey</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the passkey that is displayed on the local device instead of using a randomly generated one. This will be used during pairing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">passkey</td><td>ASCII string of 6 digits </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#a65a3c1eb75c86a8654be356823861d62">EventHandler::passkeyRequest()</a> - this will be called on the peer which will have to use <a class="el" href="#af6ef30d5fc434a196c04fce0786be338">passkeyEntered()</a> to send this passkey back to us. </dd></dl>

</div>
</div>
<a id="af8c205ade782edd538ed1a8992173bda" name="af8c205ade782edd538ed1a8992173bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8c205ade782edd538ed1a8992173bda">&#9670;&#160;</a></span>setEncryptionKeyRequirements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setEncryptionKeyRequirements </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>minimumByteSize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>maximumByteSize</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the requirements for encryption key size. If the peer cannot comply with the requirements paring will fail.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">minimumByteSize</td><td>Smallest allowed encryption key size in bytes. (no smaller than 7) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maximumByteSize</td><td>Largest allowed encryption key size in bytes. (no larger than 16) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="a9852660d8cff99513f88ec96c6a255da" name="a9852660d8cff99513f88ec96c6a255da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9852660d8cff99513f88ec96c6a255da">&#9670;&#160;</a></span>setHintFutureRoleReversal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setHintFutureRoleReversal </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enable</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Give a hint to the stack that the master/slave role might change in the future.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enable</td><td>If set to true it hints the roles are likely to swap in the future.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="ad1b3e65759878a8052b02bfbd71b1709" name="ad1b3e65759878a8052b02bfbd71b1709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1b3e65759878a8052b02bfbd71b1709">&#9670;&#160;</a></span>setIoCapability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setIoCapability </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a0c07957dd7438999d4f0a674f96f0f33">SecurityIOCapabilities_t</a></td>          <td class="paramname"><span class="paramname"><em>iocaps</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the IO capability of the local device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iocaps</td><td>type of IO capabilities available on the local device </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="a7e5f18eebeb4b4c123f64bf2bbcdd348" name="a7e5f18eebeb4b4c123f64bf2bbcdd348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e5f18eebeb4b4c123f64bf2bbcdd348">&#9670;&#160;</a></span>setKeypressNotification()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setKeypressNotification </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>enabled</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set whether or not we want to send and receive keypress notifications during passkey entry.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enabled</td><td>if true pairing will try to enable keypress notifications (dependent on other side supporting it)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="a2e2286cba9af3a6a80313cfc7bdb98ba" name="a2e2286cba9af3a6a80313cfc7bdb98ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e2286cba9af3a6a80313cfc7bdb98ba">&#9670;&#160;</a></span>setLinkEncryption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setLinkEncryption </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structble_1_1link__encryption__t.html">ble::link_encryption_t</a></td>          <td class="paramname"><span class="paramname"><em>encryption</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enabled or disable encryption on the link. The result of this request will be indicated by a call to linkEncryptionResult in the event handler when the action is completed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">encryption</td><td>encryption state requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#ae1e127f1d33c5ddbafb375bc01d914e6">EventHandler::linkEncryptionResult()</a> </dd></dl>

</div>
</div>
<a id="a87df6defe8267cc2e53b968a9d511b1b" name="a87df6defe8267cc2e53b968a9d511b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87df6defe8267cc2e53b968a9d511b1b">&#9670;&#160;</a></span>setLinkSecurity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setLinkSecurity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#aacde1096fc98fa27521894eb98b858c0">SecurityMode_t</a></td>          <td class="paramname"><span class="paramname"><em>securityMode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the security mode on a connection. Useful for elevating the security mode once certain conditions are met, e.g., a particular service is found. This call is a request for the stack to take appropriate action and may result in (re)pairing or encryption. Wait for events in your registered <a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">securityMode</td><td>Requested security mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#ae1e127f1d33c5ddbafb375bc01d914e6">EventHandler::linkEncryptionResult()</a> </dd>
<dd>
<a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html#a27f6511ff85720f02b8883ad32cbb7cf">EventHandler::pairingResult()</a> </dd></dl>

</div>
</div>
<a id="ae2749570c3d9cb7f8c4fc01b9f52bb06" name="ae2749570c3d9cb7f8c4fc01b9f52bb06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2749570c3d9cb7f8c4fc01b9f52bb06">&#9670;&#160;</a></span>setOOBDataUsage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setOOBDataUsage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceble.html#adecd79e33c3c569a6d393f99b031e89f">ble::connection_handle_t</a></td>          <td class="paramname"><span class="paramname"><em>connectionHandle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>useOOB</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>OOBProvidesMITM</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable OOB data usage during paring. If Secure Connections is supported enabling useOOB will generate Secure Connections OOB data through oobGenerated() on top of legacy pairing OOB data.</p>
<p>You do not have to call this function to return received OOB data. Use legacyPairingOobReceived or oobReceived to hand it in. This will allow the stack to use it if possible. You only need to call this function to attempt legacy OOB data exchange after pairing start and to inform the stack OOB data does not provide MITM protection (by default it is set to provide this).</p>
<p>In this model the OOB exchange takes places after the devices have connected but possibly prior to pairing. For secure connections pairing must not be started until after the OOB data has been sent and/or received. The address in the OOB data generated will match the original address used to establish the connection and will be used by the peer to identify which connection the OOB data belongs to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connectionHandle</td><td>Handle to identify the connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">useOOB</td><td>If set to true, authenticate using OOB data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">OOBProvidesMITM</td><td>If set to true keys exchanged during pairing using OOB data will provide Man-in-the-Middle protection. This indicates that the form of exchange used by the OOB data itself provides MITM protection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<a id="adabd4c2573c617e75377f444d7d9c612" name="adabd4c2573c617e75377f444d7d9c612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adabd4c2573c617e75377f444d7d9c612">&#9670;&#160;</a></span>setPairingRequestAuthorisation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::setPairingRequestAuthorisation </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>required</em></span><span class="paramdefsep"> = </span><span class="paramdefval">true</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tell the stack whether the application needs to authorise pairing requests or should they be automatically accepted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">required</td><td>If set to true, pairingRequest in the event handler will will be called and will require an action from the application to continue with pairing by calling acceptPairingRequest or cancelPairingRequest if the user wishes to reject it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>EventHandler::pairingRequest() </dd>
<dd>
EventHandler::acceptPairingRequest() </dd>
<dd>
EventHandler::cancelPairingRequest() </dd></dl>

</div>
</div>
<a id="aa79d221276fec6619d5aebe3d73ea1d2" name="aa79d221276fec6619d5aebe3d73ea1d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa79d221276fec6619d5aebe3d73ea1d2">&#9670;&#160;</a></span>setSecurityManagerEventHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ble::SecurityManager::setSecurityManagerEventHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classble_1_1SecurityManager_1_1EventHandler.html">EventHandler</a> *</td>          <td class="paramname"><span class="paramname"><em>handler</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assign the event handler implementation that will be used by the stack to signal events back to the application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>Event Handler interface implementation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aece649a2290c79d7740df5ee58fa6813" name="aece649a2290c79d7740df5ee58fa6813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece649a2290c79d7740df5ee58fa6813">&#9670;&#160;</a></span>writeBondingStateToPersistentStorage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__common.html#ga6fb48b8f40e280c30d2ae3bd0c3712c4">ble_error_t</a> ble::SecurityManager::writeBondingStateToPersistentStorage </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Some or all of bonding information may be stored in memory while in use. This will write bonding data to persistent storage. This will have no effect if no persistent storage is enabled.</p>
<dl class="section note"><dt>Note</dt><dd>This implicitly also calls preserveBondingStateOnReset(true) inside.</dd>
<dd>
Depending on the driver used to implement the storage solution used this may be a disruptive operation and may cause active connections to drop due to failed processing deadlines.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>BLE_ERROR_NONE or appropriate error code indicating the failure reason. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aded8ceb88d32bd2c2b23c60941515e0e" name="aded8ceb88d32bd2c2b23c60941515e0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aded8ceb88d32bd2c2b23c60941515e0e">&#9670;&#160;</a></span>PASSKEY_LEN</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned ble::SecurityManager::PASSKEY_LEN = 6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Declaration of type containing a passkey to be used during pairing. This is passed into initializeSecurity() to specify a pre-programmed passkey for authentication instead of generating a random one. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/FEATURE_BLE/include/ble/<a class="el" href="SecurityManager_8h_source.html">SecurityManager.h</a></li>
<li>/home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/FEATURE_BLE/source/<b>SecurityManager.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceble.html">ble</a></li><li class="navelem"><a class="el" href="classble_1_1SecurityManager.html">SecurityManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
