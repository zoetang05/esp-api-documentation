<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: ble::vendor::bluenrg_2::TransportDriver Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classble_1_1vendor_1_1bluenrg__2_1_1TransportDriver.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classble_1_1vendor_1_1bluenrg__2_1_1TransportDriver-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ble::vendor::bluenrg_2::TransportDriver Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ble::vendor::bluenrg_2::TransportDriver:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classble_1_1vendor_1_1bluenrg__2_1_1TransportDriver.png" usemap="#ble::vendor::bluenrg_5F2::TransportDriver_map" alt=""/>
  <map id="ble::vendor::bluenrg_5F2::TransportDriver_map" name="ble::vendor::bluenrg_5F2::TransportDriver_map">
<area href="classble_1_1CordioHCITransportDriver.html" alt="ble::CordioHCITransportDriver" shape="rect" coords="0,0,234,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a11503fb860fbb82e273c6d9534283709" id="r_a11503fb860fbb82e273c6d9534283709"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11503fb860fbb82e273c6d9534283709">TransportDriver</a> (PinName mosi, PinName miso, PinName sclk, PinName ncs, PinName irq)</td></tr>
<tr class="separator:a11503fb860fbb82e273c6d9534283709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabce154c30958914cf47d4d955f72f58" id="r_aabce154c30958914cf47d4d955f72f58"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aabce154c30958914cf47d4d955f72f58">initialize</a> ()</td></tr>
<tr class="separator:aabce154c30958914cf47d4d955f72f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed3ee4827b72382c5cc289b29fea267" id="r_a9ed3ee4827b72382c5cc289b29fea267"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ed3ee4827b72382c5cc289b29fea267">terminate</a> ()</td></tr>
<tr class="separator:a9ed3ee4827b72382c5cc289b29fea267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fd105cfb142e5c4d86603151c4ed7e8" id="r_a3fd105cfb142e5c4d86603151c4ed7e8"><td class="memItemLeft" align="right" valign="top">virtual uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fd105cfb142e5c4d86603151c4ed7e8">write</a> (uint8_t type, uint16_t len, uint8_t *pData)</td></tr>
<tr class="separator:a3fd105cfb142e5c4d86603151c4ed7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classble_1_1CordioHCITransportDriver"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classble_1_1CordioHCITransportDriver')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classble_1_1CordioHCITransportDriver.html">ble::CordioHCITransportDriver</a></td></tr>
<tr class="memitem:a6b87eb4ddd2a0730cc90923770be3d76 inherit pub_methods_classble_1_1CordioHCITransportDriver" id="r_a6b87eb4ddd2a0730cc90923770be3d76"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classble_1_1CordioHCITransportDriver.html#a6b87eb4ddd2a0730cc90923770be3d76">~CordioHCITransportDriver</a> ()=default</td></tr>
<tr class="separator:a6b87eb4ddd2a0730cc90923770be3d76 inherit pub_methods_classble_1_1CordioHCITransportDriver"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classble_1_1CordioHCITransportDriver"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_static_methods_classble_1_1CordioHCITransportDriver')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classble_1_1CordioHCITransportDriver.html">ble::CordioHCITransportDriver</a></td></tr>
<tr class="memitem:aa9991c014b7790b9a3be822cf9acdd61 inherit pub_static_methods_classble_1_1CordioHCITransportDriver" id="r_aa9991c014b7790b9a3be822cf9acdd61"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classble_1_1CordioHCITransportDriver.html#aa9991c014b7790b9a3be822cf9acdd61">on_data_received</a> (uint8_t *data, uint16_t len)</td></tr>
<tr class="separator:aa9991c014b7790b9a3be822cf9acdd61 inherit pub_static_methods_classble_1_1CordioHCITransportDriver"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transport driver of the ST BlueNRG_2 shield. </p><dl class="section important"><dt>Important</dt><dd>: With that driver, it is assumed that the SPI bus used is not shared with other SPI peripherals. The reasons behind this choice are simplicity and performance:<ul>
<li>Reading from the peripheral SPI can be challenging especially if other threads access the same SPI bus. Indeed it is common that the function spiRead yield nothings even if the chip has signaled data with the irq line. Sharing would make the situation worse and increase the risk of timeout of HCI commands / response.</li>
<li>This driver can be used even if the RTOS is disabled or not present it may may be usefull for some targets.</li>
</ul>
</dd></dl>
<p>If The SPI is shared with other peripherals then the best option would be to handle SPI read in a real time thread woken up by an event flag.</p>
<p>Other mechanisms might also be added in the future to handle data read as an event from the stack. This might not be the best solution for all <a class="el" href="classble_1_1BLE.html">BLE</a> chip; especially this one. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a11503fb860fbb82e273c6d9534283709" name="a11503fb860fbb82e273c6d9534283709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11503fb860fbb82e273c6d9534283709">&#9670;&#160;</a></span>TransportDriver()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ble::vendor::bluenrg_2::TransportDriver::TransportDriver </td>
          <td>(</td>
          <td class="paramtype">PinName</td>          <td class="paramname"><span class="paramname"><em>mosi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName</td>          <td class="paramname"><span class="paramname"><em>miso</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName</td>          <td class="paramname"><span class="paramname"><em>sclk</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName</td>          <td class="paramname"><span class="paramname"><em>ncs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName</td>          <td class="paramname"><span class="paramname"><em>irq</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Construct the transport driver required by a BlueNRG_2 module. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mosi</td><td>Pin of the SPI mosi </td></tr>
    <tr><td class="paramname">miso</td><td>Pin of the SPI miso </td></tr>
    <tr><td class="paramname">sclk</td><td>Pin of the SPI clock </td></tr>
    <tr><td class="paramname">irq</td><td>Pin used by the module to signal data are available. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aabce154c30958914cf47d4d955f72f58" name="aabce154c30958914cf47d4d955f72f58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabce154c30958914cf47d4d955f72f58">&#9670;&#160;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ble::vendor::bluenrg_2::TransportDriver::initialize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1CordioHCITransportDriver.html#a529d2a097c4ce75b6c99bd73e737b91f">CordioHCITransportDriver::initialize</a> </dd></dl>

<p>Implements <a class="el" href="classble_1_1CordioHCITransportDriver.html#a529d2a097c4ce75b6c99bd73e737b91f">ble::CordioHCITransportDriver</a>.</p>

</div>
</div>
<a id="a9ed3ee4827b72382c5cc289b29fea267" name="a9ed3ee4827b72382c5cc289b29fea267"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ed3ee4827b72382c5cc289b29fea267">&#9670;&#160;</a></span>terminate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ble::vendor::bluenrg_2::TransportDriver::terminate </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1CordioHCITransportDriver.html#a00c69bb15698e7a40c4b743495a25e04">CordioHCITransportDriver::terminate</a> </dd></dl>

<p>Implements <a class="el" href="classble_1_1CordioHCITransportDriver.html#a00c69bb15698e7a40c4b743495a25e04">ble::CordioHCITransportDriver</a>.</p>

</div>
</div>
<a id="a3fd105cfb142e5c4d86603151c4ed7e8" name="a3fd105cfb142e5c4d86603151c4ed7e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fd105cfb142e5c4d86603151c4ed7e8">&#9670;&#160;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint16_t ble::vendor::bluenrg_2::TransportDriver::write </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>pData</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classble_1_1CordioHCITransportDriver.html#aec092ffe78fdd613349ce455f3b60e82">CordioHCITransportDriver::write</a> </dd></dl>

<p>Implements <a class="el" href="classble_1_1CordioHCITransportDriver.html#aec092ffe78fdd613349ce455f3b60e82">ble::CordioHCITransportDriver</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/drivers/ble/FEATURE_BLE/COMPONENT_BlueNRG_2/<b>BlueNrg2HCIDriver.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceble.html">ble</a></li><li class="navelem"><b>vendor</b></li><li class="navelem"><b>bluenrg_2</b></li><li class="navelem"><a class="el" href="classble_1_1vendor_1_1bluenrg__2_1_1TransportDriver.html">TransportDriver</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
