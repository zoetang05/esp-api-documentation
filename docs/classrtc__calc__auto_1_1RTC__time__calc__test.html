<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: rtc_calc_auto.RTC_time_calc_test Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classrtc__calc__auto_1_1RTC__time__calc__test.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classrtc__calc__auto_1_1RTC__time__calc__test-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">rtc_calc_auto.RTC_time_calc_test Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for rtc_calc_auto.RTC_time_calc_test:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classrtc__calc__auto_1_1RTC__time__calc__test.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a640755545647c45068b498de133e87d1" id="r_a640755545647c45068b498de133e87d1"><td class="memItemLeft" align="right" valign="top"><a id="a640755545647c45068b498de133e87d1" name="a640755545647c45068b498de133e87d1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>setup</b> (self)</td></tr>
<tr class="separator:a640755545647c45068b498de133e87d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a97847b6182ef6726c1f58d8e37259887" id="r_a97847b6182ef6726c1f58d8e37259887"><td class="memItemLeft" align="right" valign="top"><a id="a97847b6182ef6726c1f58d8e37259887" name="a97847b6182ef6726c1f58d8e37259887"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>first</b> = True</td></tr>
<tr class="separator:a97847b6182ef6726c1f58d8e37259887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdb1c7cb585d6d22c6c6b0fda805e81c" id="r_abdb1c7cb585d6d22c6c6b0fda805e81c"><td class="memItemLeft" align="right" valign="top"><a id="abdb1c7cb585d6d22c6c6b0fda805e81c" name="abdb1c7cb585d6d22c6c6b0fda805e81c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>date</b> = datetime.datetime(1970, 1, 1, 23, 0, 0)</td></tr>
<tr class="separator:abdb1c7cb585d6d22c6c6b0fda805e81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a2f77b69dfd07060fd60420ea5a004956" id="r_a2f77b69dfd07060fd60420ea5a004956"><td class="memItemLeft" align="right" valign="top"><a id="a2f77b69dfd07060fd60420ea5a004956" name="a2f77b69dfd07060fd60420ea5a004956"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>edge_date</b> = datetime.datetime(2100, 2, 28, 0, 0, 0)</td></tr>
<tr class="separator:a2f77b69dfd07060fd60420ea5a004956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8f8aac7c7d5bc99fd06e9a09bf6334" id="r_a0c8f8aac7c7d5bc99fd06e9a09bf6334"><td class="memItemLeft" align="right" valign="top"><a id="a0c8f8aac7c7d5bc99fd06e9a09bf6334" name="a0c8f8aac7c7d5bc99fd06e9a09bf6334"></a>
<a class="el" href="structlist.html">list</a>&#160;</td><td class="memItemRight" valign="bottom"><b>years</b> = [1970, 1971, 2000, 2096, 2100, 2105]</td></tr>
<tr class="separator:a0c8f8aac7c7d5bc99fd06e9a09bf6334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c715d39e64a76affbc4b7ace842a66c" id="r_a4c715d39e64a76affbc4b7ace842a66c"><td class="memItemLeft" align="right" valign="top"><a id="a4c715d39e64a76affbc4b7ace842a66c" name="a4c715d39e64a76affbc4b7ace842a66c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>year_id</b> = 0</td></tr>
<tr class="separator:a4c715d39e64a76affbc4b7ace842a66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f44295fa74680ec4a16a68eff875eda" id="r_a6f44295fa74680ec4a16a68eff875eda"><td class="memItemLeft" align="right" valign="top"><a id="a6f44295fa74680ec4a16a68eff875eda" name="a6f44295fa74680ec4a16a68eff875eda"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>full_leap_year_support</b> = False</td></tr>
<tr class="separator:a6f44295fa74680ec4a16a68eff875eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7eb54162f4c802ec7ddde100f31bc20" id="r_af7eb54162f4c802ec7ddde100f31bc20"><td class="memItemLeft" align="right" valign="top"><a id="af7eb54162f4c802ec7ddde100f31bc20" name="af7eb54162f4c802ec7ddde100f31bc20"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>RTC_FULL_LEAP_YEAR_SUPPORT</b> = 0</td></tr>
<tr class="separator:af7eb54162f4c802ec7ddde100f31bc20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9440da414a6ed6bb49cab463ba106e71" id="r_a9440da414a6ed6bb49cab463ba106e71"><td class="memItemLeft" align="right" valign="top"><a id="a9440da414a6ed6bb49cab463ba106e71" name="a9440da414a6ed6bb49cab463ba106e71"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>RTC_PARTIAL_LEAP_YEAR_SUPPORT</b> = 1</td></tr>
<tr class="separator:a9440da414a6ed6bb49cab463ba106e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a91672f354ccc81e9aa91b6bbe9bd68ec" id="r_a91672f354ccc81e9aa91b6bbe9bd68ec"><td class="memItemLeft" align="right" valign="top"><a id="a91672f354ccc81e9aa91b6bbe9bd68ec" name="a91672f354ccc81e9aa91b6bbe9bd68ec"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_set_leap_year_support</b> (self, key, value, timestamp)</td></tr>
<tr class="separator:a91672f354ccc81e9aa91b6bbe9bd68ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7762d7f2a1a1c9bf29ebb649f267e2d0" id="r_a7762d7f2a1a1c9bf29ebb649f267e2d0"><td class="memItemLeft" align="right" valign="top"><a id="a7762d7f2a1a1c9bf29ebb649f267e2d0" name="a7762d7f2a1a1c9bf29ebb649f267e2d0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_verify_timestamp</b> (self, key, value, timestamp)</td></tr>
<tr class="separator:a7762d7f2a1a1c9bf29ebb649f267e2d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a0d907e61ecc5c84634ac5a62cea05d3d" id="r_a0d907e61ecc5c84634ac5a62cea05d3d"><td class="memItemLeft" align="right" valign="top"><a id="a0d907e61ecc5c84634ac5a62cea05d3d" name="a0d907e61ecc5c84634ac5a62cea05d3d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_verify_timestamp</b></td></tr>
<tr class="separator:a0d907e61ecc5c84634ac5a62cea05d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbabc8487ad972675a1f18736b3479ed" id="r_afbabc8487ad972675a1f18736b3479ed"><td class="memItemLeft" align="right" valign="top"><a id="afbabc8487ad972675a1f18736b3479ed" name="afbabc8487ad972675a1f18736b3479ed"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_set_leap_year_support</b></td></tr>
<tr class="separator:afbabc8487ad972675a1f18736b3479ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">This is the host part of the test to verify if:
- _rtc_mktime function converts a calendar time into time since UNIX epoch as a time_t,
- _rtc_localtime function converts a given time in seconds since epoch into calendar time.

The same algoritm to generate next calendar time to be tested is used by both parts of the test.
We will check if correct time since UNIX epoch is calculated for the first and the last day
of each month and across valid years.

Mbed part of the test sends calculated time since UNIX epoch.
This part validates given value and responds to indicate pass or fail.
Additionally it sends also encoded day of week and day of year which
will be needed to verify _rtc_localtime.

Support for both types of RTC devices is provided:
- RTCs which handles all leap years in the mentioned year range correctly. Leap year is determined by checking if
  the year counter value is divisible by 400, 100, and 4. No problem here.
- RTCs which handles leap years correctly up to 2100. The RTC does a simple bit comparison to see if the two
  lowest order bits of the year counter are zero. In this case 2100 year will be considered
  incorrectly as a leap year, so the last valid point in time will be 28.02.2100 23:59:59 and next day will be
  29.02.2100 (invalid). So after 28.02.2100 the day counter will be off by a day.
</pre> </div><hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/zoe/Mbed Programs/esp_code/mbed-os/hal/tests/TESTS/host_tests/<b>rtc_calc_auto.py</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacertc__calc__auto.html">rtc_calc_auto</a></li><li class="navelem"><a class="el" href="classrtc__calc__auto_1_1RTC__time__calc__test.html">RTC_time_calc_test</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
