<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API Documentation: /home/zoe/Mbed Programs/esp-tests-mbed6 Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API Documentation
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_274bd2cc3fe88453c691de2d382f5ff4.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">esp-tests-mbed6 Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_93b43cf094938a31c7b08620157bb296.html">c12832_mbed6</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_8fa405bbc29e9096a4e73c0b9fd8abd3.html">qei_mbed6</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_f0db6cd36700897a01e62da702b3c0b4.html">tests</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_73cee5b3b6c1af395b75bc1cf0196042.html">wrapper_classes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="constants_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><b>constants.h</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>![](./resources/official_armmbed_example_badge.png) </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Bare metal blinky Mbed OS example</h1>
<p>This example shows how to achieve memory optimizations in Mbed OS. Starting with a blinky application, the example illustrates how to enable the bare metal profile and further memory optimizations.</p>
<p>You can build this project with all supported <a href="https://os.mbed.com/docs/mbed-os/latest/tools/index.html">Mbed OS build tools</a>. However, this example project specifically refers to the command-line interface tool <a href="https://github.com/ARMmbed/mbed-cli#installing-mbed-cli">Arm Mbed CLI</a>.</p>
<ol type="1">
<li>Install Mbed CLI.</li>
</ol>
<ol type="1">
<li>From the command-line, import the example: <code>mbed import mbed-os-example-blinky-baremetal</code></li>
</ol>
<ol type="1">
<li>Change the current directory to where the project was imported.</li>
</ol>
<h2><a class="anchor" id="autotoc_md2"></a>
Application functionality</h2>
<p>The <code>main()</code> function toggles the state of a digital output connected to an <a class="el" href="classLED.html">LED</a> on the board.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Building and running</h2>
<ol type="1">
<li>Connect a USB cable between the USB port on the target and the host computer.</li>
</ol>
<ol type="1">
<li><p class="startli">Run the following command to build the example project, program the microcontroller flash memory, and open a serial terminal:</p>
<div class="fragment"><div class="line">$ mbed compile -m &lt;TARGET&gt; -t &lt;TOOLCHAIN&gt; --flash --sterm</div>
</div><!-- fragment --></li>
</ol>
<p>Your PC may take a few minutes to compile your code.</p>
<p>The binary is located at <code>./BUILD/&lt;TARGET&gt;/&lt;TOOLCHAIN&gt;/mbed-os-example-blinky-baremetal.bin</code>.</p>
<p>Alternatively, you can manually copy the binary to the target, which gets mounted on the host computer through USB.</p>
<p>Depending on the target, you can build the example project with the <code>GCC_ARM</code>, <code>ARM</code> or <code>IAR</code> toolchain. After installing Arm Mbed CLI, run the command below to determine which toolchain supports your target:</p>
<div class="fragment"><div class="line">$ mbed compile -S</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Expected output</h2>
<p>The <a class="el" href="classLED.html">LED</a> on your target turns on and off every 500 milliseconds, and the serial terminal shows an output similar to:</p>
<div class="fragment"><div class="line">--- Terminal on /dev/tty.usbmodem21102 - 9600,8,N,1 ---</div>
<div class="line">This is the bare metal blinky example running on Mbed OS 99.99.99.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Configuring the application</h2>
<h3><a class="anchor" id="autotoc_md6"></a>
The bare metal profile</h3>
<p>The bare metal profile is a configuration of Mbed OS that excludes the RTOS, as well as other features. We designed it specifically for ultraconstrained devices because it gives you more control over the system. For more details, please see <a href="https://os.mbed.com/docs/mbed-os/latest/reference/mbed-os-bare-metal.html">the bare metal documentation</a></p>
<p>To build with the bare metal profile, the application configuration file must contain:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;requires&quot;: [&quot;bare-metal&quot;]</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
Futher optimizations</h3>
<p>Some of the configurations shown below are already set by default in <code>targets/targets.json</code> and <code>platform/mbed_lib.json</code>. </p>
<h4><a class="anchor" id="autotoc_md8"></a>
Linking with smaller C libraries</h4>
<p>Both the <code>ARM</code> and <code>GCC_ARM</code> toolchains support optimized versions of their C standard libraries, microlib and newlib-nano. We recommend using them with the bare metal profile.</p>
<p>To build with the smaller C libraries, modify the application configuration file:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;target_overrides&quot;: {</div>
<div class="line">        &quot;*&quot;: {</div>
<div class="line">            &quot;target.c_lib&quot;: &quot;small&quot;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The build system reverts to the standard C library if support for the small C library is not enabled for your target. You can find more information <a href="https://github.com/ARMmbed/mbed-os-5-docs/blob/development/docs/program-setup/bare_metal/c_small_libs.md">here</a>.</p>
<h4><a class="anchor" id="autotoc_md9"></a>
Using Mbed minimal printf library</h4>
<p>Mbed OS offers a smaller <code>printf()</code> alternative. The <a href="https://github.com/ARMmbed/mbed-os/blob/master/platform/source/minimal-printf/README.md">minimal printf</a> library implements a subset of the <code>v/s/f/printf</code> function family, and you can disable floating points to further reduce code size.</p>
<p>To build with the minimal printf library and disable floating points printing, you need to modify the application configuration file:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;target_overrides&quot;: {</div>
<div class="line">        &quot;*&quot;: {</div>
<div class="line">            &quot;target.printf_lib&quot;: &quot;minimal-printf&quot;,</div>
<div class="line">            &quot;platform.minimal-printf-enable-floating-point&quot;: false</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Further optimizations are possible. For more details, please see the minimal printf README.</p>
<h4><a class="anchor" id="autotoc_md10"></a>
Using a minimal console</h4>
<p>If your application only needs unbuffered I/O operations, you can save additional memory by using a configuration of the platform library, which removes file handling functionality from the <a href="https://github.com/ARMmbed/mbed-os/blob/master/platform/source/mbed_retarget.cpp">system I/O retarget code</a>.</p>
<p>To build with the minimal console functionality, modify the application configuration file:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;target_overrides&quot;: {</div>
<div class="line">        &quot;*&quot;: {</div>
<div class="line">            &quot;platform.stdio-minimal-console-only&quot;: true</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md11"></a>
Memory comparison</h4>
<p>The below table shows the result for the blinky bare metal application compiled with the release profile on K64F for the GCC_ARM toolchain.</p>
<p>The baseline configuration used is the blinky bare metal application built with the standard C library.</p>
<p>Mbed OS release: mbed-os-6.0.0-alpha-2</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Standard C lib   </th><th class="markdownTableHeadCenter">Small C lib   </th><th class="markdownTableHeadCenter">Minimal printf   </th><th class="markdownTableHeadCenter">Minimal console   </th><th class="markdownTableHeadCenter">RAM   </th><th class="markdownTableHeadCenter">Flash    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">-2,592   </td><td class="markdownTableBodyCenter">-28,581    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">-2,592   </td><td class="markdownTableBodyCenter">-29,918    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyCenter">-2,592   </td><td class="markdownTableBodyCenter">-30,810   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md12"></a>
Troubleshooting</h2>
<p>If you have problems, you can review the <a href="https://os.mbed.com/docs/latest/tutorials/debugging.html">documentation</a> for suggestions on what could be wrong and how to fix it.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Related links</h2>
<ul>
<li><a href="https://os.mbed.com/docs/mbed-os/latest/reference/mbed-os-bare-metal.html">Mbed OS bare metal</a>.</li>
<li><a href="https://os.mbed.com/docs/latest/reference/configuration.html">Mbed OS configuration</a>.</li>
<li><a href="https://os.mbed.com/docs/latest/tutorials/serial-communication.html">Mbed OS serial communication</a>.</li>
<li><a href="https://os.mbed.com/platforms/">Mbed boards</a>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
License and contributions</h3>
<p>The software is provided under the Apache-2.0 license. Contributions to this project are accepted under the same license. Please see <a class="el" href="md__2home_2zoe_2Mbed_01Programs_2esp-tests-mbed6_2CONTRIBUTING.html">contributing.md</a> for more information.</p>
<p>This project contains code from other projects. The original license text is included in those source files. They must comply with our license guide. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_e527ceeaca48f15070609887d79760c8.html">zoe</a></li><li class="navelem"><a class="el" href="dir_52e71a64f665fef17939636c3df48221.html">Mbed Programs</a></li><li class="navelem"><a class="el" href="dir_274bd2cc3fe88453c691de2d382f5ff4.html">esp-tests-mbed6</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
