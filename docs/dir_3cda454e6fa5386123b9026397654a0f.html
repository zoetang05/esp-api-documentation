<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: /home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/drivers/wifi/esp8266-driver Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_3cda454e6fa5386123b9026397654a0f.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">esp8266-driver Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_05c6d0c2e79e7e5a5f89dc617bcf3211.html">ESP8266</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="ESP8266Interface_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><b>ESP8266Interface.h</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Mbed OS driver for the ESP8266 WiFi module.</p>
<h1><a class="anchor" id="autotoc_md154"></a>
Firmware version</h1>
<p>ESP8266 modules come in different shapes and formats, but the firmware version is the most important factor. To make sure that the firmware in your module is compatible with Mbed OS, follow the <a href="https://developer.mbed.org/teams/ESP8266/wiki/Firmware-Update">Update guide</a>.</p>
<p>This driver supports AT firmware versions 1.3.0 to 1.7.0. We advise updating the <a href="https://www.espressif.com/en/support/download/at?keys=">AT firmware</a> to at least version 1.7.0.</p>
<h1><a class="anchor" id="autotoc_md155"></a>
Restrictions</h1>
<ul>
<li>The ESP8266 Wi-Fi module does not allow the TCP client to bind to a specific port.</li>
<li>Setting up a UDP server is not possible.</li>
<li>The serial port does not have hardware flow control enabled by default. Additionally, the AT command set does not have a method for limiting the download rate. Therefore, downloading anything larger than the serial port input buffer is unreliable unless you use <a href="https://www.espressif.com/en/support/download/at?keys=">AT firmware</a> version 1.7.0 or later. With older firmware, an application should be able to read fast enough to stay ahead of the network. This applies mostly to TCP protocol, where data would be lost without notification. On UDP using all firmware versions, the higher-layer protocol should recover from packet loss.</li>
</ul>
<h1><a class="anchor" id="autotoc_md156"></a>
Mandatory configuration</h1>
<p><a href="mbed_lib.json">mbed_lib.json</a> configuration assumes Arduino form factor. Please adjust according to your board. You can override parameters from your app config file.</p>
<p>At minimum, check the following configuration parameters:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;esp8266&quot;,</div>
<div class="line">    &quot;config&quot;: {</div>
<div class="line">        &quot;tx&quot;: {</div>
<div class="line">            &quot;help&quot;: &quot;TX pin for serial connection&quot;,</div>
<div class="line">            &quot;value&quot;: null &lt;- &#39;D1&#39; by default if Arduino, adjust based on your board</div>
<div class="line">        },</div>
<div class="line">        &quot;rx&quot;: {</div>
<div class="line">            &quot;help&quot;: &quot;RX pin for serial connection&quot;,</div>
<div class="line">            &quot;value&quot;: null &lt;- &#39;D0&#39; by default if Arduino, adjust based on your board</div>
<div class="line">        },</div>
<div class="line">        &quot;provide-default&quot;: {</div>
<div class="line">            &quot;help&quot;: &quot;Provide default WifiInterface. [true/false]&quot;,</div>
<div class="line">            &quot;value&quot;: false &lt;- Set to &#39;true&#39; if this is the interface you are using</div>
<div class="line">        },</div>
<div class="line">        &quot;socket-bufsize&quot;: {</div>
<div class="line">            &quot;help&quot;: &quot;Max socket data heap usage&quot;,</div>
<div class="line">            &quot;value&quot;: 8192 &lt;- Without HW flow control more is better. Once the limit is reached packets are</div>
<div class="line">                             dropped - does not matter is it TCP or UDP.</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md157"></a>
UART HW flow control</h1>
<p>UART HW flow control requires you to additionally wire the CTS and RTS flow control pins between your board and your ESP8266 module. After this, remember to add the configuration option for flow control to your app configuration file. This example uses the <a href="https://os.mbed.com/platforms/ST-Nucleo-F429ZI/">ST NUCLEO-F429ZI</a> board and <a href="https://www.cascologix.com/product/espbee/">ESPBee XBee Module</a>.</p>
<p><b>Note:</b> Not all modules expose ESP8266's RTS and CTS pins, so choose modules carefully.</p>
<p>Once you have your hardware set up, add a configuration like the following to your app configuration file. Arduino pins D1 and D0 are used as TX and RX:</p>
<div class="fragment"><div class="line"> javascript</div>
<div class="line">&quot;target_overrides&quot;: {</div>
<div class="line">        &quot;NUCLEO_F429ZI&quot;: {</div>
<div class="line">            &quot;esp8266.rts&quot;: &quot;PG_12&quot;,</div>
<div class="line">            &quot;esp8266.cts&quot;: &quot;PG_15&quot;</div>
<div class="line">         }</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md158"></a>
Example board pins</h2>
<ul>
<li>TX: D1 (Arduino Uno Revision 3 connectivity headers)</li>
<li>RX: D0 (Arduino Uno Revision 3 connectivity headers)</li>
<li>RTS: PG_12 (STMicroelectronics Morpho extension pin headers)</li>
<li>CTS: PG_15 (STMicroelectronics Morpho extension pin headers)</li>
</ul>
<h2><a class="anchor" id="autotoc_md159"></a>
Example ESP8266 pins</h2>
<ul>
<li>TX: D1 (Arduino Wireless Protoshield headers)/ TX (ESPBee XBee headers)</li>
<li>RX: D0 (Arduino Wireless Protoshield headers)/ RX (ESPBee XBee headers)</li>
<li>RTS: RTS (ESPBee XBee headers)</li>
<li>CTS: CTS (ESPBee XBee headers)</li>
</ul>
<h2><a class="anchor" id="autotoc_md160"></a>
Connections</h2>
<p>With these pictures only consider the green and yellow wires which are connected to ESP8266. The pink wire is for reset and the rest are for firmware update. TX and RX go through Arduino pins D1 and D0.</p>
<p><b>Note:</b> Pull down GPIO15(ESPBee RTS) during startup to <b>boot from flash</b>, instead of <b>firmware update</b> or <b>boot from SD card</b>. Once the software is running, the same pin is used as the RTS pin:</p>
<ul>
<li>Board TX: ESP8266 RX</li>
<li>Board RX: ESP8266 TX</li>
<li>Board RTS (grey): ESP8266 CTS(yellow)</li>
<li>Board CTS (white): ESP8266 RTS(green)</li>
</ul>
<p><img src="nucleo_esp8266_hw_fc1.jpg" alt="RTS,CTS" class="inline"/> <img src="nucleo_esp8266_hw_fc2.jpg" alt="RTS,CTS" class="inline"/> </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_456207283565120b441ff9733579e7b8.html">connectivity</a></li><li class="navelem"><a class="el" href="dir_59977a0c207738c890dea4a1d368376e.html">drivers</a></li><li class="navelem"><a class="el" href="dir_465fc08ef7a88ed42de4e140d6385b82.html">wifi</a></li><li class="navelem"><a class="el" href="dir_3cda454e6fa5386123b9026397654a0f.html">esp8266-driver</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
