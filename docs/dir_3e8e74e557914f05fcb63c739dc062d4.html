<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: /home/zoe/Mbed Programs/esp_code/mbed-os/platform/FEATURE_EXPERIMENTAL_API/FEATURE_PSA/TARGET_MBED_PSA_SRV/services/attestation/qcbor Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_3e8e74e557914f05fcb63c739dc062d4.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">qcbor Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_39375c5e13307d3e1d0539a6cbb9bd8a.html">inc</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_72e26095c29de7269fed7152a3d35cf4.html">src</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_89c894625e0194d6acb8174799c5b077.html">test</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>QCBOR encodes and decodes <a href="https://tools.ietf.org/html/rfc7049">RFC 7049</a> CBOR.</p>
<h1><a class="anchor" id="autotoc_md831"></a>
Characteristics</h1>
<p><b>Implemented in C with minimal dependency</b> – Only dependencies are C99, &lt;stdint.h&gt;, &lt;stddef.h&gt;, &lt;stdbool.h&gt; and &lt;string.h&gt; making it highly portable. There are no #ifdefs to be configured at all.</p>
<p><b>Focused on C / native data representation</b> – Simpler code because there is no support for encoding/decoding to/from JSON, pretty printing, diagnostic notation... Only encoding from native C representations and decoding to native C representations is supported.</p>
<p><b>Small simple memory model</b> – Malloc is not needed. The encode context is 136 bytes, decode context is 104 bytes and the description of decoded data item is 56 bytes. Stack use is light and there is no recursion. The caller supplies the memory to hold the encoded CBOR and encode/decode contexts so caller has full control of memory usage making it good for embedded implementations that have to run in small fixed memory.</p>
<p><b>Supports nearly all of RFC 7049</b> – Only minor, corner-case parts of RFC 7049 are not directly supported (canonicalization, decimal fractions, big floats). Decoding indefinite length strings is supported, but requires a string allocator (see documentation). Encoding indefinite length strings is not supported, but is also not necessary or preferred.</p>
<p><b>Extensible and general</b> – Provides a way to handle data types that are not directly supported.</p>
<p><b>Secure coding style</b> – Uses a construct called <a class="el" href="UsefulBuf_8h.html#aa7643740fe44091c5c6507368863e85c">UsefulBuf</a> as a discipline for very safe coding the handling of binary data.</p>
<p><b>Small code size</b> – When optimized for size using the compiler -Os option, x86 code is about 4KB (~1.1KB encode, ~2.5KB decode, ~0.4KB common). Other decoders may be smaller, but they may also do less for you, so overall size of the implementation may be larger. For example, QCBOR internally tracks error status so you don't have to check a return code on every operation.</p>
<p><b>Clear documented public interface</b> – The public interface is separated from the implementation. It can be put to use without reading the source.</p>
<p><b>Comprehensive test suite</b> – Easy to verify on a new platform or OS with the test suite. The test suite dependencies are also minimal, only additionally requiring &lt;math.h&gt; for floating point tests.</p>
<h1><a class="anchor" id="autotoc_md832"></a>
Code Status</h1>
<p>QCBOR was originally developed by Qualcomm. It was <a href="https://source.codeaurora.org/quic/QCBOR/QCBOR/">open sourced through CAF</a> with a permissive Linux license, September 2018 (thanks Qualcomm!).</p>
<p>This code in <a href="https://github.com/laurencelundblade/QCBOR">Laurence's GitHub</a> has diverged from the CAF source with some small simplifications and tidying up.</p>
<p>From Nov 3, 2018, the interface and code are fairly stable. Large changes are not planned or expected, particularly in the interface. The test coverage is pretty good.</p>
<h1><a class="anchor" id="autotoc_md833"></a>
Building</h1>
<p>There is a simple makefile for the UNIX style command line binary that compiles everything to run the tests.</p>
<p>These seven files, the contents of the src and inc directories, make up the entire implementation.</p>
<ul>
<li>inc<ul>
<li><a class="el" href="UsefulBuf_8h.html">UsefulBuf.h</a></li>
<li><a class="el" href="qcbor_8h.html">qcbor.h</a></li>
</ul>
</li>
<li>src<ul>
<li>UsefulBuf.c</li>
<li>qcbor_encode.c</li>
<li>qcbor_decode.c</li>
<li><a class="el" href="ieee754_8h_source.html">ieee754.h</a></li>
<li>ieee754.c</li>
</ul>
</li>
</ul>
<p>For most use cases you should just be able to add them to your project. Hopefully the easy portability of this implementation makes this work straight away, whatever your development environment is.</p>
<p>The files ieee754.c and <a class="el" href="ieee754_8h_source.html">ieee754.h</a> are support for half-precision floating point. The encoding side of the floating point functionality is about 500 bytes. If it is never called because no floating point numbers are ever encoded, all 500 bytes will be dead stripped and not impact code size. The decoding side is about 150 bytes of object code. It is never dead stripped because it directly referenced by the core decoder, however it doesn't add very much to the size.</p>
<p>The test directory includes some tests that are nearly as portable as the main implementation. If your development environment doesn't support UNIX style command line and make, you should be able to make a simple project and add the test files to it. Then just call RunTests() to invoke them all.</p>
<h1><a class="anchor" id="autotoc_md834"></a>
Changes from CAF Version</h1>
<ul>
<li>Float support is restored</li>
<li>Minimal length float encoding is added</li>
<li>indefinite length arrays/maps are supported</li>
<li>indefinite length strings are supported</li>
<li>Tag decoding is changed; unlimited number of tags supported, any tag value supported, tag utility function for easier tag checking</li>
<li>Addition functions in <a class="el" href="UsefulBuf_8h.html#aa7643740fe44091c5c6507368863e85c">UsefulBuf</a></li>
<li>QCBOREncode_Init takes a <a class="el" href="UsefulBuf_8h.html#aa7643740fe44091c5c6507368863e85c">UsefulBuf</a> instead of a pointer and size</li>
<li>QCBOREncode_Finish takes a <a class="el" href="UsefulBuf_8h.html#a05d9f65b59b672ec72153a346ef7cdad">UsefulBufC</a> and EncodedCBOR is remove</li>
<li>bstr wrapping of arrays/maps is replaced with OpenBstrwrap</li>
<li>AddRaw renamed to AddEncoded and can now only add whole arrays or maps, not partial maps and arrays (simplification; was a dangerous feature)</li>
<li>Finish cannot be called repeatedly on a partial decode (some tests used this, but it is not really a good thing to use in the first place)</li>
<li>UsefulOutBuf_OutUBuf changed to work differently</li>
<li>UsefulOutBuf_Init works differently</li>
<li>The "_3" functions are replaced with a small number of simpler functions</li>
<li>There is a new AddTag functon instead of the "_3" functions, making the interface simpler and saving some code</li>
<li>QCBOREncode_AddRawSimple_2 is removed (the macros that referenced still exist and work the same)</li>
</ul>
<h1><a class="anchor" id="autotoc_md835"></a>
Credits</h1>
<ul>
<li>Ganesh Kanike for porting to QSEE</li>
<li>Mark Bapst for sponsorship and release as open source by Qualcomm</li>
<li>Sachin Sharma for release through CAF</li>
<li>Tamas Ban for porting to TF-M and 32-bit ARM</li>
</ul>
<h1><a class="anchor" id="autotoc_md836"></a>
Copyright and License</h1>
<p>QCBOR is available under what is essentially the 3-Clause BSD License.</p>
<p>Files created inside Qualcomm and open-sourced through CAF (The Code Aurora Forum) have a slightly modified 3-Clause BSD License. The modification additionally disclaims NON-INFRINGEMENT.</p>
<p>Files created after release to CAF use the standard 3-Clause BSD License with no modification. These files have the SPDX license identifier, "SPDX-License-Identifier: BSD-3-Clause" in them.</p>
<h2><a class="anchor" id="autotoc_md837"></a>
BSD-3-Clause license</h2>
<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<h2><a class="anchor" id="autotoc_md838"></a>
Copyright for this README</h2>
<p>Copyright (c) 2018-2019, Laurence Lundblade. All rights reserved. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_d00fafdb9414f6e624fcf4d73ffde065.html">platform</a></li><li class="navelem"><a class="el" href="dir_a72924067aea8bbead751f11070268f4.html">FEATURE_EXPERIMENTAL_API</a></li><li class="navelem"><a class="el" href="dir_007a19531d3d09289f9f9c2cf309e91b.html">FEATURE_PSA</a></li><li class="navelem"><a class="el" href="dir_05e0d8a557d855fa23572451f1c8ea18.html">TARGET_MBED_PSA_SRV</a></li><li class="navelem"><a class="el" href="dir_ca746bf8ecd12d766019f43663efcc0b.html">services</a></li><li class="navelem"><a class="el" href="dir_923835f9769c78775a68e44a6b879543.html">attestation</a></li><li class="navelem"><a class="el" href="dir_3e8e74e557914f05fcb63c739dc062d4.html">qcbor</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
