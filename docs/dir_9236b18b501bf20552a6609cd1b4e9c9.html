<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: /home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/netsocket/tests/TESTS/network/wifi Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_9236b18b501bf20552a6609cd1b4e9c9.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">wifi Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="wifi__tests_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><b>wifi_tests.h</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is a test plan for Mbed OS Wi-Fi API.</p>
<h1><a class="anchor" id="autotoc_md442"></a>
Target API</h1>
<p>The goal of this plan is to test the <a href="https://github.com/ARMmbed/mbed-os/blob/master/connectivity/netsocket/WiFiInterface.h">WiFiInterface</a> class.</p>
<h1><a class="anchor" id="autotoc_md443"></a>
Tools needed</h1>
<ul>
<li>Mbed OS.</li>
<li>Secure Wi-Fi access point.</li>
<li>Unsecure Wi-Fi access point.</li>
</ul>
<p>This test plan is written in a tool-agnostic way and does not specify how to write, build or run test cases.</p>
<h1><a class="anchor" id="autotoc_md444"></a>
Test environment</h1>
<p>The general test environment consists of DUTs, base stations, a network connection and a test server:</p>
<p><img src="../../netsocket/wifi_environment.png" alt="Wi-Fi" class="inline"/></p>
<ul>
<li>All DUTS should be in RAAS.</li>
<li>Two Wi-Fi APs required:<ul>
<li>Nonsecured one: The SSID is later referred to as <code>&lt;ssid:unsecure&gt;</code>.</li>
<li>Secured one: The SSID is later referred to as <code>&lt;ssid:secure&gt;</code>, password referred as <code>&lt;pw:secure&gt;</code>.</li>
</ul>
</li>
<li>IPv4 and IPv6 must be routable between the Wi-Fi network IP address space and echo server.</li>
<li>Firewall must not block test traffic to and from the test server <b>echo.mbedcloudtesting.com</b>.<ul>
<li>Echo Protocol, <a href="https://tools.ietf.org/html/rfc862">RFC 862</a> is enabled in both TCP and UDP. <a class="el" href="classPort.html">Port</a> 7.</li>
<li>Discard Protocol, <a href="https://tools.ietf.org/html/rfc863">RFC 863</a> is enabled in both TCP and UDP. <a class="el" href="classPort.html">Port</a> 9.</li>
<li>Character generator protocol, <a href="https://tools.ietf.org/html/rfc864">RFC 864</a> is enabled in both TCP and UDP. <a class="el" href="classPort.html">Port</a> 19.</li>
<li>Daytime protocol, <a href="https://tools.ietf.org/html/rfc867">RFC 867</a> in both TCP and UDP. <a class="el" href="classPort.html">Port</a> 13.</li>
<li>Time protocol, <a href="https://tools.ietf.org/html/rfc868">RFC 868</a> in both TCP and UDP. <a class="el" href="classPort.html">Port</a> 37.</li>
</ul>
</li>
<li>Channels to be used must be different for both APs. For secure on channel number is later referred as <code>&lt;ch:secure&gt;</code> and for unsecure on <code>&lt;ch:unsecure&gt;</code>.</li>
<li>MAC addresses of Wi-Fi APs must be known. These are later referred to as <code>&lt;mac:secure&gt;</code> and <code>&lt;mac:unsecure&gt;</code>.</li>
<li>WPA3 may not be supported for all target platforms, Refer to target specifications before updating security protocol to WPA3 or WPA3/WPA2 in <code>mbed_app.json</code></li>
</ul>
<p><b>NOTE:</b> This document refers to an echo server because it is a requirement for running <a class="el" href="classSocket.html">Socket</a> API tests. The test cases defined in this document do not directly use it.</p>
<h1><a class="anchor" id="autotoc_md445"></a>
Test case priorities</h1>
<p>Please refer to the following table for priorities of test cases. Priorities are labeled as MUST and SHOULD. MUST means this is a requirement and therefore mandatory to pass the test. SHOULD means it is recommended to pass the test if the driver implements the feature in question.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"><a class="el" href="classTest.html">Test</a> case   </th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Priority    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">WIFI_CONSTRUCTOR   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">WIFI_CONNECT_NOCREDENTIALS   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">WIFI_SET_CREDENTIAL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">WIFI_SET_CHANNEL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">WIFI_GET_RSSI   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">WIFI_CONNECT_PARAMS_NULL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">WIFI_CONNECT_PARAMS_VALID_SECURE   </td><td class="markdownTableBodyNone">With security type:   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WEP   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA2   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA_WPA2   </td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3_WPA2   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">WIFI_CONNECT_PARAMS_CHANNEL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">WIFI_CONNECT_PARAMS_CHANNEL_FAIL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">11   </td><td class="markdownTableBodyNone">WIFI_CONNECT   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">12   </td><td class="markdownTableBodyNone">WIFI_CONNECT_DISCONNECT_NONBLOCK   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">WIFI_CONNECT_SECURE   </td><td class="markdownTableBodyNone">With security type:   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WEP   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA2   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA_WPA2   </td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3_WPA2   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3   </td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">14   </td><td class="markdownTableBodyNone">WIFI_CONNECT_SECURE_FAIL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">15   </td><td class="markdownTableBodyNone">WIFI_CONNECT_DISCONNECT_REPEAT   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">MUST    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">16   </td><td class="markdownTableBodyNone">WIFI_SCAN_NULL   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">17   </td><td class="markdownTableBodyNone">WIFI_SCAN   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">SHOULD   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md446"></a>
Building test binaries</h1>
<p>For testing the board and driver, test against the Mbed OS master branch for the most recent, up-to-date test cases and drivers.</p>
<p>To create a build environment:</p>
<div class="fragment"><div class="line">mbed new wifi_test</div>
<div class="line">cd wifi_test</div>
<div class="line">cd mbed-os</div>
<div class="line">git checkout master</div>
<div class="line">cd ..</div>
</div><!-- fragment --><p>Prepare an <code>mbed_app.json</code> configuration file with all the required definitions provided. See <a href="template_mbed_app.txt">template_mbed_app.txt</a> file for the full list of necessary definitions.</p>
<p>Now build test binaries:</p>
<div class="fragment"><div class="line">mbed test --compile -t &lt;toolchain&gt; -m &lt;target&gt; --app-config TESTS/network/wifi/template_mbed_app.txt -n mbed-os-tests-network-wifi</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md447"></a>
Running tests</h1>
<p>The RAAS user and password have to be set in the shell to access it:</p>
<div class="fragment"><div class="line">mbedgt -g &lt;target&gt;:raas_client:ruka.mbedcloudtesting.com:8000 -n mbed-os-tests-network-wifi -V -v</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md448"></a>
Test cases for WifiInterface class</h1>
<h2><a class="anchor" id="autotoc_md449"></a>
WIFI_CONSTRUCTOR</h2>
<p><b>Description:</b></p>
<p> Test that the constructor of the driver works.</p>
<p><b>Preconditions:</b></p>
<p>None.</p>
<p><b><a class="el" href="classTest.html">Test</a> step:</b></p>
<p>Construct the driver by calling the constructor.</p>
<p><b>Expected result:</b></p>
<p>Constructor returns.</p>
<h2><a class="anchor" id="autotoc_md450"></a>
WIFI_CONNECT_NOCREDENTIALS</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code> without parameters. Don't set parameters with <code>set_credentials()</code>.</p>
<p>This must be a first test to run after constructing the driver. No credentials should be given for the driver before this test.</p>
<p><b>Precondition:</b></p>
<p><a class="el" href="classTest.html">Test</a> the environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>connect()</code> call returns <code>NSAPI_ERROR_PARAMETER or NSAPI_ERROR_NO_SSID</code>.</p>
<h2><a class="anchor" id="autotoc_md451"></a>
WIFI_SET_CREDENTIAL</h2>
<p><b>Description:</b></p>
<p>This test case is to test whether the driver accepts valid credentials and rejects ones that are not valid.</p>
<p><b>Precondition:</b></p>
<p>Driver class is initialized.</p>
<p><b><a class="el" href="classTest.html">Test</a> step:</b></p>
<p>Call <code>set_credentials()</code> with various parameters described in "Expected results".</p>
<p><b>Expected result:</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameters   </th><th class="markdownTableHeadNone">Password   </th><th class="markdownTableHeadNone">Security   </th><th class="markdownTableHeadNone">Expected return code    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid=NULL   </td><td class="markdownTableBodyNone">NULL   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_NONE   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">NULL   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">NULL   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">NULL   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WEP   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER because password is missing.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">NULL   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_NONE   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">[any 64 character string]   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER because password is too long    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">[any 63 character string]   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">""   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">""   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">""   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_NONE   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">"12345678"   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">"12345678"   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">"12345678"   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA2   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">"12345678"   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA3   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">"12345678"   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ssid="OK"   </td><td class="markdownTableBodyNone">"12345678"   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WEP   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK or NSAPI_ERROR_UNSUPPORTED    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ssid=""   </td><td class="markdownTableBodyNone">""   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_NONE   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md452"></a>
WIFI_SET_CHANNEL</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> validity of <code><a class="el" href="classWiFiInterface.html#ada47234a287483d4daa257d78ca97910">WiFiInterface::set_channel()</a></code>.</p>
<p>When proper channel number is feed, it should return <code>NSAPI_ERROR_OK</code>. API documentation is unclear what to report on error case, but we assume <code>NSAPI_ERROR_PARAMETER</code>.</p>
<p>If the driver does not support setting channels for scan, it should report <code>NSAPI_ERROR_UNSUPPORTED</code> for all of the channels.</p>
<p><b>Precondition:</b></p>
<p>Driver class is initialized.</p>
<p><b><a class="el" href="classTest.html">Test</a> step:</b></p>
<p>Call <code>set_channel()</code> with various parameters described in "Expected results".</p>
<p><b>Expected result:</b></p>
<p>For 2.4 Ghz chips:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Channel   </th><th class="markdownTableHeadNone">Expected return code    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK (0 = any channel)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK if supporting European frequencies    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER if configured for North America    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">15   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">because not a valid 2.4 Ghz channel   </td></tr>
</table>
<p>For 5 Ghz chips:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Channel   </th><th class="markdownTableHeadNone">Expected return code    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETER    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">because not a valid 5 Ghz channel number    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">36   </td><td class="markdownTableBodyNone">NSAPI_ERROR_OK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">169   </td><td class="markdownTableBodyNone">NSAPI_ERROR_PARAMETERs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">should not be allowed in any country   </td></tr>
</table>
<p>Drivers not supporting</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">channel   </th><th class="markdownTableHeadNone">Expected return code    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&lt;any&gt;   </td><td class="markdownTableBodyNone">NSAPI_ERROR_UNSUPPORTED should be returned for ALL channel numbers &gt; 0.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md453"></a>
WIFI_GET_RSSI</h2>
<p><b>Description:</b></p>
<p>Test <code><a class="el" href="classWiFiInterface.html#a63a4451befd0b166aa8817c6e1b5012c">WiFiInterface::get_rssi()</a></code> API. When connected, it should return a valid RSSI value. When unconnected, it should return 0.</p>
<p>API is a bit unclear whether 0 can also mean that driver does not support reporting of RSSI.</p>
<p><b>Precondition:</b></p>
<p><a class="el" href="classTest.html">Test</a> environment is set up as specified in "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code>get_rssi()</code>, store the result.</li>
<li>Call <code>connect()</code> with valid SSID parameters. Wait for connection.</li>
<li>Call <code>get_rssi()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p>The first call should return 0, and the second call should return a negative number between -10 and -100.</p>
<h2><a class="anchor" id="autotoc_md454"></a>
WIFI_CONNECT_PARAMS_NULL</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code>WiFiInterface::connect(ssid, pass, security, channel)</code> with NULL parameters.</p>
<p><b>Precondition:</b></p>
<p><a class="el" href="classTest.html">Test</a> environment is set up as specified in "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code>WiFiInterface::connect(NULL, NULL)</code>.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a4510ac0eaf9c28c602bed98a0789fb46">WiFiInterface::connect</a>("", "")</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p>Both <code>connect()</code> calls return NSAPI_ERROR_PARAMETER.</p>
<h2><a class="anchor" id="autotoc_md455"></a>
WIFI_CONNECT_PARAMS_VALID_SECURE</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code>WiFiInterface::connect(ssid, pass, security)</code> with valid parameters for secure network.</p>
<p><b>Preconditions:</b></p>
<p><a class="el" href="classTest.html">Test</a> environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a4510ac0eaf9c28c602bed98a0789fb46">WiFiInterface::connect</a>( &lt;ssid:secure&gt;, &lt;pw:secure&gt;, NSAPI_SECURITY_WPA2)</code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>connect()</code> call returns NSAPI_ERROR_OK.</p>
<h2><a class="anchor" id="autotoc_md456"></a>
WIFI_CONNECT_PARAMS_CHANNEL</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code>WiFiInterface::connect(ssid, pass, security, channel)</code> with valid parameters for the secure network using the channel specified.</p>
<p>This test only applies to devices that support selecting the channel (passes <code>WIFI-SET-CHANNEL</code>).</p>
<p><b>Precondition:</b></p>
<p><a class="el" href="classTest.html">Test</a> environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a4510ac0eaf9c28c602bed98a0789fb46">WiFiInterface::connect</a>( &lt;ssid:secure&gt;, &lt;pw:secure&gt;, NSAPI_SECURITY_WPA2, &lt;ch:secure&gt;)</code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>connect()</code> call returns NSAPI_ERROR_OK.</p>
<h2><a class="anchor" id="autotoc_md457"></a>
WIFI_CONNECT_PARAMS_CHANNEL_FAIL</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code>WiFiInterface::connect(ssid, pass, security, channel)</code> with valid parameters for the secure network using the channel specified. The channel specified must be wrong, so the connect call can fail.</p>
<p>This test only applies to devices that support selecting the channel (passes <code>WIFI-SET-CHANNEL</code>).</p>
<p><b>Precondition:</b></p>
<p><a class="el" href="classTest.html">Test</a> environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a4510ac0eaf9c28c602bed98a0789fb46">WiFiInterface::connect</a>( &lt;ssid:secure&gt;, &lt;pw:secure&gt;, NSAPI_SECURITY_WPA2, &lt;ch:secure&gt;)</code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p>The <code>connect()</code> call returns <code>NSAPI_ERROR_CONNECTION_TIMEOUT</code> or <code>NSAPI_ERROR_NO_CONNECTION</code>.</p>
<h2><a class="anchor" id="autotoc_md458"></a>
WIFI_CONNECT</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code> without parameters. Use <code>set_credentials()</code> for setting parameters. This checks that driver does not try to retrieve SSID from a location it's not controlling.</p>
<p><b>Preconditions:</b></p>
<ol type="1">
<li><a class="el" href="classTest.html">Test</a> environment is set up as specified in the "Test Environment" chapter.</li>
</ol>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li><code>Call WiFiInterface::set_credentials( &lt;ssid:unsecure&gt;, NULL)</code>.</li>
<li><code>Call WiFiInterface::connect()</code>.</li>
<li><code>disconnect()</code>.</li>
<li><code>Call <a class="el" href="classWiFiInterface.html#a0e9f9cdd651e3210126de6faa2e92b43">WiFiInterface::set_credentials</a>( &lt;ssid:unsecure&gt;, "")</code>.</li>
<li><code>Call WiFiInterface::connect()</code>.</li>
<li><code>disconnect()</code>.</li>
<li>Trash the memory storing SSID.</li>
<li><code>Call WiFiInterface::set_credentials( &lt;ssid:unsecure&gt;, "")</code>.</li>
<li><code>Call WiFiInterface::connect()</code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>connect()</code> calls return <code>NSAPI_ERROR_OK</code>.</p>
<h2><a class="anchor" id="autotoc_md459"></a>
WIFI_CONNECT_DISCONNECT_NONBLOCK</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code> and <code><a class="el" href="classWiFiInterface.html#af8e56cfcdde754ab65dad00402f74008">WiFiInterface::disconnect()</a></code> in non-blocking mode. It checks that driver can connect and disconnect in nonblocking mode.</p>
<p><b>Preconditions:</b></p>
<ol type="1">
<li><a class="el" href="classTest.html">Test</a> environment is set up as specified in the "Test Environment" chapter.</li>
</ol>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li><code>Call WiFiInterface::set_credentials( &lt;ssid:secure&gt;, NULL)</code>.</li>
<li><code>Call WiFiInterface::set_blocking(false)</code></li>
<li><code>Call WiFiInterface::connect()</code>.</li>
<li><code>Cal <a class="el" href="classWiFiInterface.html#a0e9f9cdd651e3210126de6faa2e92b43">WiFiInterface::set_credentials(const char *ssid, const char *pass, nsapi_security_t security)</a></code></li>
<li><code>Call WiFiInterface::connect()</code>.</li>
<li><code>disconnect()</code></li>
<li><code>disconnect()</code></li>
<li><code>Call WiFiInterface::set_blocking(true)</code></li>
</ol>
<p><b>Expected result:</b></p>
<ol type="1">
<li>Drivers which do not support asynchronous mode <code>set_blocking(false)</code> call returns <code>NSAPI_ERROR_UNSUPPORTED</code> and skips test case.</li>
<li><code>connect()</code> call returns <code>NSAPI_ERROR_OK</code>.</li>
<li><code>set_credentials(...)</code> call returns <code>NSAPI_ERROR_BUSY</code>.</li>
<li>Second <code>connect()</code> call returns <code>NSAPI_ERROR_BUSY</code> or <code>NSAPI_ERROR_IS_CONNECTED</code>.</li>
<li>Attached callback informs about connection status. <a class="el" href="classCallback.html">Callback</a> reports status <code>NSAPI_STATUS_CONNECTING</code> and <code>NSAPI_STATUS_CONNECTED</code>.</li>
<li><code>disconnect()</code> call returns <code>NSAPI_ERROR_OK</code>.</li>
<li>Second <code>disconnect()</code> call returns <code>NSAPI_ERROR_BUSY</code> or <code>NSAPI_ERROR_IS_CONNECTED</code>.</li>
<li>To confirm disconnection callback reports <code>NSAPI_STATUS_DISCONNECTED</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md460"></a>
WIFI_CONNECT_SECURE</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code> without parameters. Use secure settings for <code>set_credentials</code>.</p>
<p><b>Precondition:</b></p>
<p>The test environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a0e9f9cdd651e3210126de6faa2e92b43">WiFiInterface::set_credentials</a>( &lt;ssid:secure&gt;, &lt;pw:secure&gt;, NSAPI_SECURITY_WPA2)</code>.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p>The <code>connect()</code> call returns <code>NSAPI_ERROR_OK</code>.</p>
<h2><a class="anchor" id="autotoc_md461"></a>
WIFI_CONNECT_SECURE_FAIL</h2>
<p><b>Description:</b></p>
<p> Test <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code> failing with the wrong password.</p>
<p><b>Precondition:</b></p>
<p>The test environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a0e9f9cdd651e3210126de6faa2e92b43">WiFiInterface::set_credentials</a>( &lt;ssid:secure&gt;, &lt;any 8 character string, not pw:secure&gt;, NSAPI_SECURITY_WPA2)</code>.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>connect()</code> call returns <code>NSAPI_ERROR_AUTH_FAILUR</code>, <code>NSAPI_ERROR_CONNECTION_TIMEOUT</code> or <code>NSAPI_ERROR_NO_CONNECTION</code>.</p>
<h2><a class="anchor" id="autotoc_md462"></a>
WIFI_CONNECT_DISCONNECT_REPEAT</h2>
<p><b>Description:</b></p>
<p><a class="el" href="classTest.html">Test</a> <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code> - <code>disconnect()</code> repetition works.</p>
<p><b>Precondition:</b></p>
<p>The test environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a0e9f9cdd651e3210126de6faa2e92b43">WiFiInterface::set_credentials</a>( &lt;ssid:secure&gt;, NULL)</code>.</li>
<li>Repeat 10 times:<ol type="a">
<li>Call <code><a class="el" href="classWiFiInterface.html#a783cff8cdde624760c360abcffabad99">WiFiInterface::connect()</a></code>.</li>
<li><code>disconnect()</code>.</li>
</ol>
</li>
</ol>
<p><b>Expected result:</b></p>
<p>Each <code>connect()</code> call returns <code>NSAPI_ERROR_OK</code>.</p>
<p>Each <code>disconnect()</code> returns <code>NSAPI_ERROR_OK</code>.</p>
<h2><a class="anchor" id="autotoc_md463"></a>
WIFI_SCAN_NULL</h2>
<p><b>Description:</b></p>
<p>Call <code><a class="el" href="classWiFiInterface.html#a78c30e52e431573172114cd28a25ecd8">WiFiInterface::scan()</a></code> with null parameters to get the number of networks available.</p>
<p><b>Precondition:</b></p>
<p>The test environment is set up as specified in the "Test Environment" chapter.</p>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Call <code>WiFiInterface::scan(NULL, 0)</code>;.</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>scan()</code> returns a positive number that is higher or equal to two. (&gt;=2).</p>
<h2><a class="anchor" id="autotoc_md464"></a>
WIFI_SCAN</h2>
<p><b>Description:</b></p>
<p> Call <code><a class="el" href="classWiFiInterface.html#a78c30e52e431573172114cd28a25ecd8">WiFiInterface::scan()</a></code> with a valid accesspoint list allocated.</p>
<p><b>Preconditions:</b></p>
<ol type="1">
<li>The test environment is set up as specified in the "Test Environment" chapter.</li>
<li>The test environment must contain less than 10 Wi-Fi SSID within the listening range of DUT; otherwise, adjust the value used in step 2.</li>
</ol>
<p><b><a class="el" href="classTest.html">Test</a> steps:</b></p>
<ol type="1">
<li>Initialize the driver.</li>
<li>Allocate array of 10 WiFiAccessPoint objects.</li>
<li>Call <code><a class="el" href="classWiFiInterface.html#a78c30e52e431573172114cd28a25ecd8">WiFiInterface::scan</a>(&lt;array&gt;, 10)</code>;</li>
</ol>
<p><b>Expected result:</b></p>
<p><code>scan()</code> returns a positive number that is higher or equal to two. (&gt;=2).</p>
<p>Scan elements from array indices between 0 and the number returned:</p>
<ul>
<li>Call <code>get_ssid()</code> for each element. <code>&lt;ssid:secure&gt;</code> and <code>&lt;ssid:unsecure&gt;</code> must be found.</li>
<li>Call <code>get_rssid()</code> for each element. The value must be between -10 and -100.</li>
</ul>
<p>For those known networks, test that the following return values are found:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">get_ssid()   </th><th class="markdownTableHeadNone">get_bssid()   </th><th class="markdownTableHeadNone">get_security()   </th><th class="markdownTableHeadNone">get_channel()    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>&lt;ssid:unsecure&gt;</code>   </td><td class="markdownTableBodyNone"><code>&lt;mac:unsecure&gt;</code>   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_NONE   </td><td class="markdownTableBodyNone"><code>&lt;ch:unsecure&gt;</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>&lt;ssid:secure&gt;</code>   </td><td class="markdownTableBodyNone"><code>&lt;mac:secure&gt;</code>   </td><td class="markdownTableBodyNone">NSAPI_SECURITY_WPA2   </td><td class="markdownTableBodyNone"><code>&lt;ch:secure&gt;</code>   </td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_456207283565120b441ff9733579e7b8.html">connectivity</a></li><li class="navelem"><a class="el" href="dir_cb5af92455080ed55b05484cdba3a725.html">netsocket</a></li><li class="navelem"><a class="el" href="dir_8abe74aa74d44b6a1d0b60b5e02914e9.html">tests</a></li><li class="navelem"><a class="el" href="dir_1482edad8fd315ce7acd1a9c633fdb71.html">TESTS</a></li><li class="navelem"><a class="el" href="dir_20e7d394488add88d34a2ee0229bd5ec.html">network</a></li><li class="navelem"><a class="el" href="dir_9236b18b501bf20552a6609cd1b4e9c9.html">wifi</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
