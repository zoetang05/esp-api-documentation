<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: Ticker Tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__hal__ticker__tests.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Ticker Tests<div class="ingroups"><a class="el" href="group__hal.html">Hal</a> &raquo; <a class="el" href="group__hal__us__ticker.html">Microsecond Ticker</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadabebf57283177d6339741bdd123a9ef" id="r_gadabebf57283177d6339741bdd123a9ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gadabebf57283177d6339741bdd123a9ef">ticker_init_test</a> (void)</td></tr>
<tr class="separator:gadabebf57283177d6339741bdd123a9ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga833c5681484b1e6454586ef30d6c0678" id="r_ga833c5681484b1e6454586ef30d6c0678"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga833c5681484b1e6454586ef30d6c0678">ticker_info_test</a> (void)</td></tr>
<tr class="separator:ga833c5681484b1e6454586ef30d6c0678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17858c362f082e851b3806faa2e78cb6" id="r_ga17858c362f082e851b3806faa2e78cb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga17858c362f082e851b3806faa2e78cb6">ticker_increment_test</a> (void)</td></tr>
<tr class="separator:ga17858c362f082e851b3806faa2e78cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga915e3737ac7b5c54e6d73dfad2d14837" id="r_ga915e3737ac7b5c54e6d73dfad2d14837"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga915e3737ac7b5c54e6d73dfad2d14837">ticker_interrupt_test</a> (void)</td></tr>
<tr class="separator:ga915e3737ac7b5c54e6d73dfad2d14837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9e645c6739e76ed900eab97aec89444" id="r_gae9e645c6739e76ed900eab97aec89444"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae9e645c6739e76ed900eab97aec89444">ticker_past_test</a> (void)</td></tr>
<tr class="separator:gae9e645c6739e76ed900eab97aec89444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ef116a262d48e6bcb92a61972c33f34" id="r_ga4ef116a262d48e6bcb92a61972c33f34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4ef116a262d48e6bcb92a61972c33f34">ticker_repeat_reschedule_test</a> (void)</td></tr>
<tr class="separator:ga4ef116a262d48e6bcb92a61972c33f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2400db9c939d75c0c824d1e306d1338b" id="r_ga2400db9c939d75c0c824d1e306d1338b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2400db9c939d75c0c824d1e306d1338b">ticker_fire_now_test</a> (void)</td></tr>
<tr class="separator:ga2400db9c939d75c0c824d1e306d1338b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac597403928850206b09fe0d1f382a6a4" id="r_gac597403928850206b09fe0d1f382a6a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac597403928850206b09fe0d1f382a6a4">ticker_speed_test</a> (void)</td></tr>
<tr class="separator:gac597403928850206b09fe0d1f382a6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae044c5fad81c29039b334f8b7ba1afec" id="r_gae044c5fad81c29039b334f8b7ba1afec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae044c5fad81c29039b334f8b7ba1afec">ticker_overflow_test</a> (void)</td></tr>
<tr class="separator:gae044c5fad81c29039b334f8b7ba1afec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ee57a9615187a9ace9b909efb8d3b5e" id="r_ga1ee57a9615187a9ace9b909efb8d3b5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1ee57a9615187a9ace9b909efb8d3b5e">ticker_frequency_test</a> (void)</td></tr>
<tr class="separator:ga1ee57a9615187a9ace9b909efb8d3b5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Tests to validate the proper implementation of a ticker</p>
<p>To run the ticker hal tests use the command: </p><pre class="fragment">mbed test -t &lt;toolchain&gt; -m &lt;target&gt; -n tests-mbed_hal-common_ticker*
</pre><h2 class="groupheader">Function Documentation</h2>
<a id="ga2400db9c939d75c0c824d1e306d1338b" name="ga2400db9c939d75c0c824d1e306d1338b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2400db9c939d75c0c824d1e306d1338b">&#9670;&#160;</a></span>ticker_fire_now_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_fire_now_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that ticker_fire_interrupt causes the interrupt to get fired immediately.</p>
<p>Given ticker is available. When ticker_fire_interrupt is called. Then ticker interrupt is triggered. </p>

</div>
</div>
<a id="ga1ee57a9615187a9ace9b909efb8d3b5e" name="ga1ee57a9615187a9ace9b909efb8d3b5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ee57a9615187a9ace9b909efb8d3b5e">&#9670;&#160;</a></span>ticker_frequency_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_frequency_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that the ticker is operating at the frequency it specifies.</p>
<p>Given ticker is available. When ticker specifies its frequency. Then the specified frequency is valid. </p>

</div>
</div>
<a id="ga17858c362f082e851b3806faa2e78cb6" name="ga17858c362f082e851b3806faa2e78cb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17858c362f082e851b3806faa2e78cb6">&#9670;&#160;</a></span>ticker_increment_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_increment_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that the ticker increments by one on each tick.</p>
<p>We have the following assumption for the timer clock frequency:</p>
<p>NOTE: high freq ticker: 250 KHz (1 tick per 4 us) - 8 Mhz (1 tick per 1/8 us) low power ticker: 8 KHz (1 tick per 125 us) - 64 KHz (1 tick per ~15.6 us)</p>
<p>Lowest CPU speed is 16 MHz (1 tick per 1/16 us).</p>
<p>For the boards with ticker clock freq less than or equal to 250 KHz we will try to prove that ticker is incremented by one straightforward by reading ticker count value in the loop in order to detect a single ticker value update (hopefully by one). For faster tickers we need to prove this indirectly using additional count_ticks() function which returns number of ticks needed to perform N cycles of the empty while loop. For the same number of cycles function result should be the same with accuracy +/- 1 tick. After the first test we will call count_ticks again with number of cycles equal N, N+1, N+2, ... until we get other ticks result.</p>
<p>Given ticker is available. When ticker is initialised. Then ticker counter is incremented by one. </p>

</div>
</div>
<a id="ga833c5681484b1e6454586ef30d6c0678" name="ga833c5681484b1e6454586ef30d6c0678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga833c5681484b1e6454586ef30d6c0678">&#9670;&#160;</a></span>ticker_info_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_info_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that ticker frequency is non-zero and counter is at least 8 bits</p>
<p>Given ticker is available. When ticker information data is obtained. Then ticker information indicate that frequency is non-zero and counter is at least 8 bits. </p>

</div>
</div>
<a id="gadabebf57283177d6339741bdd123a9ef" name="gadabebf57283177d6339741bdd123a9ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadabebf57283177d6339741bdd123a9ef">&#9670;&#160;</a></span>ticker_init_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_init_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that ticker_init can be called multiple times and ticker_init resets the internal count and disables the ticker interrupt.</p>
<p>Given ticker is initialised and interrupt is set. When ticker is re-initialised. Then ticker keeps counting and disables the ticker interrupt. </p>

</div>
</div>
<a id="ga915e3737ac7b5c54e6d73dfad2d14837" name="ga915e3737ac7b5c54e6d73dfad2d14837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga915e3737ac7b5c54e6d73dfad2d14837">&#9670;&#160;</a></span>ticker_interrupt_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_interrupt_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that ticker interrupt fires only when the ticker counter increments to the value set by ticker_set_interrupt.</p>
<p>Given ticker is available, initialised. When ticker interrupt is set. Then ticker interrupt fires at the valid time. </p>

</div>
</div>
<a id="gae044c5fad81c29039b334f8b7ba1afec" name="gae044c5fad81c29039b334f8b7ba1afec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae044c5fad81c29039b334f8b7ba1afec">&#9670;&#160;</a></span>ticker_overflow_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_overflow_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that the ticker correctly handles overflow.</p>
<p>Note that for high frequency timers we will only prove that ticker counter rollovers and continue counting (it is not possible to prove in deterministic way that after rollover next value is 0).</p>
<p>Given ticker is available. When ticker has overflows. Then ticker continues counting from the beginning and interrupt scheduling works. </p>

</div>
</div>
<a id="gae9e645c6739e76ed900eab97aec89444" name="gae9e645c6739e76ed900eab97aec89444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9e645c6739e76ed900eab97aec89444">&#9670;&#160;</a></span>ticker_past_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_past_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that ticker interrupt is not triggered when ticker_set_interrupt is called with a time from the past</p>
<p>Given ticker is available, initialised. When ticker interrupt is set to the time in the past. Then ticker interrupt is not triggered. </p>

</div>
</div>
<a id="ga4ef116a262d48e6bcb92a61972c33f34" name="ga4ef116a262d48e6bcb92a61972c33f34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ef116a262d48e6bcb92a61972c33f34">&#9670;&#160;</a></span>ticker_repeat_reschedule_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_repeat_reschedule_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that ticker can be rescheduled repeatedly before the handler has been called.</p>
<p>Given ticker is available, initialised. When ticker interrupt is set and then rescheduled (interrupt time is modified). Then ticker interrupt is triggered according the rescheduled time. </p>

</div>
</div>
<a id="gac597403928850206b09fe0d1f382a6a4" name="gac597403928850206b09fe0d1f382a6a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac597403928850206b09fe0d1f382a6a4">&#9670;&#160;</a></span>ticker_speed_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ticker_speed_test </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classTest.html">Test</a> that common ticker functions complete with the required amount of time.</p>
<p>Given ticker is available. When ticker_read, ticker_clear_interrupt, ticker_set_interrupt, ticker_fire_interrupt or ticker_disable_interrupt function is called. Then its execution is not longer than 20 us. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
