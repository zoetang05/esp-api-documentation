<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: HCI abstraction architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__2home_2zoe_2Mbed_01Programs_2esp__code_2mbed-os_2connectivity_2FEATURE__BLE_2include_2ble_2driver_2doc_2HCIAbstraction.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HCI abstraction architecture</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md176"></a></p>
<p>The HCI driver is split into two interfaces:</p><ul>
<li><code>CordioHCIDriver</code>: It is the driver for a <a class="el" href="classBLE.html">BLE</a> controller. It contains the primitive necessary to start and initialize the controller.</li>
<li><code>CordioHCITransport</code>: It is the transport interface which is used by the HCI driver to communicate with the controller.</li>
</ul>
<p>A <code>CordioHCITransport</code> is injected into a <code>CordioHCIDriver</code> at construction time. A <code>CordioHCIDriver</code> is also injected at construction time of a <code>BLECordio</code> instance.</p>
<p>This can be summarized in the following diagram:</p>
<p><img src="resources/architecture.png" alt="" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md177"></a>
CordioHCITransportDriver</h1>
<p>The single responsibility of this driver is to handle the communication with the Bluetooth module. Basically, sending and reading bytes.</p>
<p>Given that the Bluetooth specification defines standard transport interface, an implementation of the H4 interface is bundled in this port. It might be extended in the future with an implementation of the H5 interface. However, there is no plan to provide the SDIO implementation at the moment.</p>
<p>This interface is defined in the header file <a href="../CordioHCITransportDriver.h">CordioHCITransportDriver.h</a></p>
<h1><a class="anchor" id="autotoc_md178"></a>
CordioHCIDriver</h1>
<p>The responsibilities of this driver are:</p><ul>
<li>Provide the memory which will used by the Bluetooth stack.</li>
<li>Initialize the Bluetooth controller.</li>
<li>Handle the reset/startup sequence of the Bluetooth controller.</li>
</ul>
<p>This interface is defined in the header file <a href="../CordioHCIDriver.h">CordioHCIDriver.h</a></p>
<p>A partial implementation is present in the file <a href="../../../../source/cordio/driver/CordioHCIDriver.cpp">CordioHCIDriver.cpp</a>. It defines the function delivering memory to the stack and a complete reset sequence. However, it does not define any initialization for the Bluetooth controller, this part being specific to the controller used.</p>
<p>The driver also provides an interface to perform RF testing on the <a class="el" href="classBLE.html">BLE</a> trasnmitter. This is done using the LE Receiver/Transmitter <a class="el" href="classTest.html">Test</a> command and LE <a class="el" href="classTest.html">Test</a> End command as described in the Bluetooth Core spec in Vol.2, Part E, 7.8.28-30.</p>
<p>The driver allows to set preferred TX power. This is an optional feature (check return code) and the support for it and the extent of control is down to the <a class="el" href="classBLE.html">BLE</a> chip. Chips may have different allowed values, although the command will pick the closest value no smaller than requested. Please refer to the controller code or <a class="el" href="classBLE.html">BLE</a> chip documentation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
