<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: /home/zoe/Mbed Programs/esp_code/mbed-os/connectivity/drivers/ble/FEATURE_BLE/TARGET_STM32WB/STM32Cube_FW/shci_tl.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('shci__tl_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle"><div class="title">shci_tl.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>System HCI command header for the system channel.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="tl_8h_source.html">tl.h</a>&quot;</code><br />
</div>
<p><a href="shci__tl_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtSHciIO.html">tSHciIO</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure used to manage the BUS IO operations. All the structure fields will point to functions defined at user level.  <a href="structtSHciIO.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtSHciContext.html">tSHciContext</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contain the SHCI context.  <a href="structtSHciContext.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtSHCI__UserEvtRxParam.html">tSHCI_UserEvtRxParam</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSHCI__TL__HciInitConf__t.html">SHCI_TL_HciInitConf_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af3f7aa4043e0220864efb26a2e6e5868" id="r_af3f7aa4043e0220864efb26a2e6e5868"><td class="memItemLeft" align="right" valign="top"><a id="af3f7aa4043e0220864efb26a2e6e5868" name="af3f7aa4043e0220864efb26a2e6e5868"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>SHCI_TL_UserEventFlowStatus_t</b> { <b>SHCI_TL_UserEventFlow_Disable</b>
, <b>SHCI_TL_UserEventFlow_Enable</b>
 }</td></tr>
<tr class="separator:af3f7aa4043e0220864efb26a2e6e5868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4256d67626d93a467d4d775f0c4c42f" id="r_ae4256d67626d93a467d4d775f0c4c42f"><td class="memItemLeft" align="right" valign="top"><a id="ae4256d67626d93a467d4d775f0c4c42f" name="ae4256d67626d93a467d4d775f0c4c42f"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>SHCI_TL_CmdStatus_t</b> { <b>SHCI_TL_CmdBusy</b>
, <b>SHCI_TL_CmdAvailable</b>
 }</td></tr>
<tr class="separator:ae4256d67626d93a467d4d775f0c4c42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a389e8476b1d9eea9b2c2363423ee6fce" id="r_a389e8476b1d9eea9b2c2363423ee6fce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a389e8476b1d9eea9b2c2363423ee6fce">shci_send</a> (uint16_t cmd_code, uint8_t len_cmd_payload, uint8_t *p_cmd_payload, TL_EvtPacket_t *p_rsp_status)</td></tr>
<tr class="memdesc:a389e8476b1d9eea9b2c2363423ee6fce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an System HCI Command.  <br /></td></tr>
<tr class="separator:a389e8476b1d9eea9b2c2363423ee6fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a722b527a16ec3e98a4780fa48699e379" id="r_a722b527a16ec3e98a4780fa48699e379"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a722b527a16ec3e98a4780fa48699e379">shci_register_io_bus</a> (<a class="el" href="structtSHciIO.html">tSHciIO</a> *fops)</td></tr>
<tr class="memdesc:a722b527a16ec3e98a4780fa48699e379"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register IO bus services.  <br /></td></tr>
<tr class="separator:a722b527a16ec3e98a4780fa48699e379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a318f5eaf84f0b62945f11124b6c695" id="r_a8a318f5eaf84f0b62945f11124b6c695"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a318f5eaf84f0b62945f11124b6c695">shci_notify_asynch_evt</a> (void *pdata)</td></tr>
<tr class="memdesc:a8a318f5eaf84f0b62945f11124b6c695"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine that must be called when the system channel reports a packet has been received.  <br /></td></tr>
<tr class="separator:a8a318f5eaf84f0b62945f11124b6c695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebb14e6fe9738b8114dbd5b39ec35570" id="r_aebb14e6fe9738b8114dbd5b39ec35570"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aebb14e6fe9738b8114dbd5b39ec35570">shci_resume_flow</a> (void)</td></tr>
<tr class="memdesc:aebb14e6fe9738b8114dbd5b39ec35570"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resume the User Event Flow which has been stopped on return from UserEvtRx() when the User Event has not been processed.  <br /></td></tr>
<tr class="separator:aebb14e6fe9738b8114dbd5b39ec35570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006624c0d3c84b18905b1d08e71444d7" id="r_a006624c0d3c84b18905b1d08e71444d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a006624c0d3c84b18905b1d08e71444d7">shci_cmd_resp_wait</a> (uint32_t timeout)</td></tr>
<tr class="memdesc:a006624c0d3c84b18905b1d08e71444d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called when an System HCI Command is sent to the CPU2 and the response is waited. It is called from the same context the System HCI command has been sent. It shall not return until the command response notified by <a class="el" href="#aace80fa6b0232a3d1775b3b935cf6f80" title="This function is called when an System HCI command is received from the CPU2. A weak implementation i...">shci_cmd_resp_release()</a> is received. A weak implementation is available in shci_tl.c based on polling mechanism The user may re-implement this function in the application to improve performance :  <br /></td></tr>
<tr class="separator:a006624c0d3c84b18905b1d08e71444d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace80fa6b0232a3d1775b3b935cf6f80" id="r_aace80fa6b0232a3d1775b3b935cf6f80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aace80fa6b0232a3d1775b3b935cf6f80">shci_cmd_resp_release</a> (uint32_t flag)</td></tr>
<tr class="memdesc:aace80fa6b0232a3d1775b3b935cf6f80"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called when an System HCI command is received from the CPU2. A weak implementation is available in shci_tl.c based on polling mechanism The user may re-implement this function in the application to improve performance :  <br /></td></tr>
<tr class="separator:aace80fa6b0232a3d1775b3b935cf6f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b4ad1d266def4a751cc39f68d5bd530" id="r_a6b4ad1d266def4a751cc39f68d5bd530"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b4ad1d266def4a751cc39f68d5bd530">shci_user_evt_proc</a> (void)</td></tr>
<tr class="memdesc:a6b4ad1d266def4a751cc39f68d5bd530"><td class="mdescLeft">&#160;</td><td class="mdescRight">This process shall be called each time the shci_notify_asynch_evt notification is received.  <br /></td></tr>
<tr class="separator:a6b4ad1d266def4a751cc39f68d5bd530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f547fee9cda56ce6534363f6965864f" id="r_a2f547fee9cda56ce6534363f6965864f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f547fee9cda56ce6534363f6965864f">shci_init</a> (void(*UserEvtRx)(void *pData), void *pConf)</td></tr>
<tr class="memdesc:a2f547fee9cda56ce6534363f6965864f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the System Host Controller Interface. This function must be called before any communication on the System Channel.  <br /></td></tr>
<tr class="separator:a2f547fee9cda56ce6534363f6965864f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>System HCI command header for the system channel. </p>
<dl class="section author"><dt>Author</dt><dd>MCD Application Team </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<h2><center>&copy; Copyright (c) 2019 STMicroelectronics. All rights reserved.</center></h2>
<p>This software component is licensed by ST under BSD 3-Clause license, the "License"; You may not use this file except in compliance with the License. You may obtain a copy of the License at: opensource.org/licenses/BSD-3-Clause </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aace80fa6b0232a3d1775b3b935cf6f80" name="aace80fa6b0232a3d1775b3b935cf6f80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace80fa6b0232a3d1775b3b935cf6f80">&#9670;&#160;</a></span>shci_cmd_resp_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_cmd_resp_release </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flag</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called when an System HCI command is received from the CPU2. A weak implementation is available in shci_tl.c based on polling mechanism The user may re-implement this function in the application to improve performance : </p>
<ul>
<li>It may use UTIL_SEQ_SetEvt() API when using the Sequencer</li>
<li>It may use a semaphore when using cmsis_os interface</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>Release flag </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a006624c0d3c84b18905b1d08e71444d7" name="a006624c0d3c84b18905b1d08e71444d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a006624c0d3c84b18905b1d08e71444d7">&#9670;&#160;</a></span>shci_cmd_resp_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_cmd_resp_wait </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>timeout</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called when an System HCI Command is sent to the CPU2 and the response is waited. It is called from the same context the System HCI command has been sent. It shall not return until the command response notified by <a class="el" href="#aace80fa6b0232a3d1775b3b935cf6f80" title="This function is called when an System HCI command is received from the CPU2. A weak implementation i...">shci_cmd_resp_release()</a> is received. A weak implementation is available in shci_tl.c based on polling mechanism The user may re-implement this function in the application to improve performance : </p>
<ul>
<li>It may use UTIL_SEQ_WaitEvt() API when using the Sequencer</li>
<li>It may use a semaphore when using cmsis_os interface</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>Waiting timeout </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f547fee9cda56ce6534363f6965864f" name="a2f547fee9cda56ce6534363f6965864f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f547fee9cda56ce6534363f6965864f">&#9670;&#160;</a></span>shci_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_init </td>
          <td>(</td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>UserEvtRx&#160;</em></span>)(void *pData), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pConf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the System Host Controller Interface. This function must be called before any communication on the System Channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pData</td><td>System events callback function pointer This callback is triggered when an user event is received on the System Channel from CPU2. </td></tr>
    <tr><td class="paramname">pConf</td><td>Configuration structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8a318f5eaf84f0b62945f11124b6c695" name="a8a318f5eaf84f0b62945f11124b6c695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a318f5eaf84f0b62945f11124b6c695">&#9670;&#160;</a></span>shci_notify_asynch_evt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_notify_asynch_evt </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pdata</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt service routine that must be called when the system channel reports a packet has been received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pdata</td><td>Packet or event pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a722b527a16ec3e98a4780fa48699e379" name="a722b527a16ec3e98a4780fa48699e379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a722b527a16ec3e98a4780fa48699e379">&#9670;&#160;</a></span>shci_register_io_bus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_register_io_bus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtSHciIO.html">tSHciIO</a> *</td>          <td class="paramname"><span class="paramname"><em>fops</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register IO bus services. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fops</td><td>The SHCI IO structure managing the IO BUS </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aebb14e6fe9738b8114dbd5b39ec35570" name="aebb14e6fe9738b8114dbd5b39ec35570"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebb14e6fe9738b8114dbd5b39ec35570">&#9670;&#160;</a></span>shci_resume_flow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_resume_flow </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resume the User Event Flow which has been stopped on return from UserEvtRx() when the User Event has not been processed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>It is better to go through the background process as it is not sure from which context this API may be called</p>

</div>
</div>
<a id="a389e8476b1d9eea9b2c2363423ee6fce" name="a389e8476b1d9eea9b2c2363423ee6fce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a389e8476b1d9eea9b2c2363423ee6fce">&#9670;&#160;</a></span>shci_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_send </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>cmd_code</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>len_cmd_payload</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>p_cmd_payload</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TL_EvtPacket_t *</td>          <td class="paramname"><span class="paramname"><em>p_rsp_status</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an System HCI Command. </p>
<p>shci_send </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td>cmd_code = Opcode of the command </td></tr>
    <tr><td class="paramname"></td><td>len_cmd_payload = Length of the command payload </td></tr>
    <tr><td class="paramname"></td><td>p_cmd_payload = Address of the command payload </td></tr>
    <tr><td class="paramname"></td><td>p_rsp_status = Address of the full buffer holding the command complete event </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"></td><td>None </td></tr>
  </table>
  </dd>
</dl>
<p>The command complete of a system command does not have the header It starts immediately with the evtserial field</p>

</div>
</div>
<a id="a6b4ad1d266def4a751cc39f68d5bd530" name="a6b4ad1d266def4a751cc39f68d5bd530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b4ad1d266def4a751cc39f68d5bd530">&#9670;&#160;</a></span>shci_user_evt_proc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void shci_user_evt_proc </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This process shall be called each time the shci_notify_asynch_evt notification is received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Up to release version v1.2.0, a while loop was implemented to read out events from the queue as long as it is not empty. However, in a bare metal implementation, this leads to calling in a "blocking" mode shci_user_evt_proc() as long as events are received without giving the opportunity to run other tasks in the background. From now, the events are reported one by one. When it is checked there is still an event pending in the queue, a request to the user is made to call again shci_user_evt_proc(). This gives the opportunity to the application to run other background tasks between each event.</p>
<p>It is more secure to use <a class="el" href="stm__list_8c.html#a655f57ad188b2acde2d6a870b54a9bc5">LST_remove_head()</a>/LST_insert_head() compare to <a class="el" href="stm__list_8c.html#af59c0087867a30dea933b244cf5a7236">LST_get_next_node()</a>/LST_remove_node() in case the user overwrite the header where the next/prev pointers are located</p>
<p>put back the event in the queue</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_456207283565120b441ff9733579e7b8.html">connectivity</a></li><li class="navelem"><a class="el" href="dir_59977a0c207738c890dea4a1d368376e.html">drivers</a></li><li class="navelem"><a class="el" href="dir_01973298b99ae3451d28320b74eaff96.html">ble</a></li><li class="navelem"><a class="el" href="dir_bace2f63c4602e00ca8e2f83c127e6e1.html">FEATURE_BLE</a></li><li class="navelem"><a class="el" href="dir_e6abf1140a5a55a7b220d2675023aca7.html">TARGET_STM32WB</a></li><li class="navelem"><a class="el" href="dir_bcaf69165acc90fda558b4cb88d29d3d.html">STM32Cube_FW</a></li><li class="navelem"><a class="el" href="shci__tl_8h.html">shci_tl.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
