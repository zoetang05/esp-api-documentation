<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP API: /home/zoe/Mbed Programs/esp_code/mbed-os/platform/FEATURE_EXPERIMENTAL_API/FEATURE_PSA/TARGET_MBED_PSA_SRV/services/attestation/tfm_impl/tfm_plat_device_id.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('tfm__plat__device__id_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">tfm_plat_device_id.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;tfm_plat_defs.h&quot;</code><br />
</div>
<p><a href="tfm__plat__device__id_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9a1fe697cf23d53e56cdbcc5fdfeb316" id="r_a9a1fe697cf23d53e56cdbcc5fdfeb316"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a1fe697cf23d53e56cdbcc5fdfeb316">INSTANCE_ID_MAX_SIZE</a>&#160;&#160;&#160;(33u)</td></tr>
<tr class="memdesc:a9a1fe697cf23d53e56cdbcc5fdfeb316"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of instance ID in bytes.  <br /></td></tr>
<tr class="separator:a9a1fe697cf23d53e56cdbcc5fdfeb316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c0685a984f007769217c4815286dca8" id="r_a2c0685a984f007769217c4815286dca8"><td class="memItemLeft" align="right" valign="top"><a id="a2c0685a984f007769217c4815286dca8" name="a2c0685a984f007769217c4815286dca8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IMPLEMENTATION_ID_MAX_SIZE</b>&#160;&#160;&#160;(32u)</td></tr>
<tr class="memdesc:a2c0685a984f007769217c4815286dca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of implementation ID in bytes. <br /></td></tr>
<tr class="separator:a2c0685a984f007769217c4815286dca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1878bde39e8bcc65aa2730c9304586af" id="r_a1878bde39e8bcc65aa2730c9304586af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1878bde39e8bcc65aa2730c9304586af">HW_VERSION_MAX_SIZE</a>&#160;&#160;&#160;(18u)</td></tr>
<tr class="memdesc:a1878bde39e8bcc65aa2730c9304586af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of hardware version in bytes.  <br /></td></tr>
<tr class="separator:a1878bde39e8bcc65aa2730c9304586af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5828f2e0fdef8561dc7a0b887564adcc" id="r_a5828f2e0fdef8561dc7a0b887564adcc"><td class="memItemLeft" align="right" valign="top">enum tfm_plat_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5828f2e0fdef8561dc7a0b887564adcc">tfm_plat_get_instance_id</a> (uint32_t *size, uint8_t *<a class="el" href="wsf__trace_8c.html#a631cb00ea94506727e7ab9cdd27cf9cd">buf</a>)</td></tr>
<tr class="memdesc:a5828f2e0fdef8561dc7a0b887564adcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the UEID of the device.  <br /></td></tr>
<tr class="separator:a5828f2e0fdef8561dc7a0b887564adcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31682d868864629f926b1cbc34dc5847" id="r_a31682d868864629f926b1cbc34dc5847"><td class="memItemLeft" align="right" valign="top">enum tfm_plat_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31682d868864629f926b1cbc34dc5847">tfm_plat_get_implementation_id</a> (uint32_t *size, uint8_t *<a class="el" href="wsf__trace_8c.html#a631cb00ea94506727e7ab9cdd27cf9cd">buf</a>)</td></tr>
<tr class="memdesc:a31682d868864629f926b1cbc34dc5847"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Implementation ID of the device.  <br /></td></tr>
<tr class="separator:a31682d868864629f926b1cbc34dc5847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6d53c2858c125f16036fea13ccf7c9d" id="r_ae6d53c2858c125f16036fea13ccf7c9d"><td class="memItemLeft" align="right" valign="top">enum tfm_plat_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6d53c2858c125f16036fea13ccf7c9d">tfm_plat_get_hw_version</a> (uint32_t *size, uint8_t *<a class="el" href="wsf__trace_8c.html#a631cb00ea94506727e7ab9cdd27cf9cd">buf</a>)</td></tr>
<tr class="memdesc:ae6d53c2858c125f16036fea13ccf7c9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the hardware version of the device.  <br /></td></tr>
<tr class="separator:ae6d53c2858c125f16036fea13ccf7c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The interfaces defined in this file are meant to provide the following attributes of the device:</p><ul>
<li>Instance ID: Unique identifier of the device.</li>
<li>Implementation ID: Original implementation signer of the attestation key.</li>
<li>Hardware version: Identify the GDSII that went to fabrication. </li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1878bde39e8bcc65aa2730c9304586af" name="a1878bde39e8bcc65aa2730c9304586af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1878bde39e8bcc65aa2730c9304586af">&#9670;&#160;</a></span>HW_VERSION_MAX_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HW_VERSION_MAX_SIZE&#160;&#160;&#160;(18u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum size of hardware version in bytes. </p>
<p>Recommended to use the European Article Number format: EAN-13+5 </p>

</div>
</div>
<a id="a9a1fe697cf23d53e56cdbcc5fdfeb316" name="a9a1fe697cf23d53e56cdbcc5fdfeb316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a1fe697cf23d53e56cdbcc5fdfeb316">&#9670;&#160;</a></span>INSTANCE_ID_MAX_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INSTANCE_ID_MAX_SIZE&#160;&#160;&#160;(33u)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum size of instance ID in bytes. </p>
<dl class="section note"><dt>Note</dt><dd>The interfaces defined in this file must be implemented for each SoC. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae6d53c2858c125f16036fea13ccf7c9d" name="ae6d53c2858c125f16036fea13ccf7c9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6d53c2858c125f16036fea13ccf7c9d">&#9670;&#160;</a></span>tfm_plat_get_hw_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum tfm_plat_err_t tfm_plat_get_hw_version </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the hardware version of the device. </p>
<p>This optional claim provides metadata linking the token to the GDSII that went to fabrication for this instance. It is represented as CBOR text string. It is recommended to use for identification the format of the European Article Number: EAN-13+5.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>size As an input value it indicates the size of the caller allocated buffer (in bytes) to store the HW version. At return its value is updated with the exact size of the HW version. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Pointer to the buffer to store the HW version</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns error code specified in tfm_plat_err_t </dd></dl>

</div>
</div>
<a id="a31682d868864629f926b1cbc34dc5847" name="a31682d868864629f926b1cbc34dc5847"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31682d868864629f926b1cbc34dc5847">&#9670;&#160;</a></span>tfm_plat_get_implementation_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum tfm_plat_err_t tfm_plat_get_implementation_id </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Implementation ID of the device. </p>
<p>This mandatory claim represents the original implementation signer of the attestation key and identifies the contract between the report and verification. A verification service will use this claim to locate the details of the verification process. The claim will be represented by a custom EAT claim with a value consisting of a CBOR byte string. The size of this string will normally be 32 bytes to accommodate a 256 bit hash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>size As an input value it indicates the size of the caller allocated buffer (in bytes) to store the implementation ID. At return its value is updated with the exact size of the implementation ID. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Pointer to the buffer to store the implementation ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns error code specified in tfm_plat_err_t </dd></dl>

</div>
</div>
<a id="a5828f2e0fdef8561dc7a0b887564adcc" name="a5828f2e0fdef8561dc7a0b887564adcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5828f2e0fdef8561dc7a0b887564adcc">&#9670;&#160;</a></span>tfm_plat_get_instance_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum tfm_plat_err_t tfm_plat_get_instance_id </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the UEID of the device. </p>
<p>This mandatory claim represents the unique identifier of the instance. In the PSA definition is a hash of the public attestation key of the instance. The claim will be represented by the EAT standard claim UEID of type GUID. The EAT definition of a GUID type is that it will be between 128 &amp; 256 bits but this implementation will use the full 256 bits to accommodate a hash result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>size As an input value it indicates the size of the caller allocated buffer (in bytes) to store the UEID. At return its value is updated with the exact size of the UEID. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Pointer to the buffer to store the UEID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns error code specified in tfm_plat_err_t</dd></dl>
<p>Instance ID is mapped to EAT Universal Entity ID (UEID) This implementation creates the instance ID as follows:</p><ul>
<li>byte 0: 0x01 indicates the type of UEID to be GUID</li>
<li>byte 1-32: Hash of attestation public key. Public key is hashed in raw format without any encoding. </li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_d00fafdb9414f6e624fcf4d73ffde065.html">platform</a></li><li class="navelem"><a class="el" href="dir_a72924067aea8bbead751f11070268f4.html">FEATURE_EXPERIMENTAL_API</a></li><li class="navelem"><a class="el" href="dir_007a19531d3d09289f9f9c2cf309e91b.html">FEATURE_PSA</a></li><li class="navelem"><a class="el" href="dir_05e0d8a557d855fa23572451f1c8ea18.html">TARGET_MBED_PSA_SRV</a></li><li class="navelem"><a class="el" href="dir_ca746bf8ecd12d766019f43663efcc0b.html">services</a></li><li class="navelem"><a class="el" href="dir_923835f9769c78775a68e44a6b879543.html">attestation</a></li><li class="navelem"><a class="el" href="dir_7b21a9191e8d2f7f6543909a71e3be35.html">tfm_impl</a></li><li class="navelem"><a class="el" href="tfm__plat__device__id_8h.html">tfm_plat_device_id.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
